theory my_strassen_MatrixMultiplication_mult_ijkqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_Sum" "../../lib/isabelle/matrices_MyMatrix" "../../lib/isabelle/matrices_MatrixArithmetic" "../../lib/isabelle/sum_extended_Sum_extended" "../../lib/isabelle/matrices_BlockMul" "../../lib/isabelle/matrices_ring_simp_Symb" "Why3STD.matrix_Matrix"
begin
definition mdl :: "'a matrix \<Rightarrow> 'a mat"
  where "mdl m = create (matrix_Matrix.rows m) (columns m) (elts m)" for m
datatype  with_symb = with_symb'mk (phy: "int matrix") (sym: "expr")
definition with_symb_vld :: "env \<Rightarrow> with_symb \<Rightarrow> _"
  where "with_symb_vld env ws \<longleftrightarrow> e_mdl env (sym ws) = mdl (phy ws) \<and> e_vld env (sym ws) \<and> e_rows (sym ws) = matrices_MyMatrix.rows (mdl (phy ws)) \<and> e_cols (sym ws) = cols (mdl (phy ws))" for env ws
theorem mult_ijk'vc:
  fixes a :: "int matrix"
  fixes b :: "int matrix"
  assumes fact0: "cols (mdl a) = matrices_MyMatrix.rows (mdl b)"
  shows "let r :: int = matrix_Matrix.rows a; c :: int = columns b in ((0 :: int) \<le> r \<and> (0 :: int) \<le> c) \<and> (\<forall>(rs :: int matrix). matrix_Matrix.rows rs = r \<and> columns rs = c \<and> (\<forall>(i :: int) (j :: int). ((0 :: int) \<le> i \<and> i < r) \<and> (0 :: int) \<le> j \<and> j < c \<longrightarrow> elts rs i j = (0 :: int)) \<longrightarrow> (let o1 :: int = r - (1 :: int) in ((0 :: int) \<le> o1 + (1 :: int) \<longrightarrow> ((\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < (0 :: int)) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs i0 j0 = mul_cell (mdl a) (mdl b) i0 j0) \<and> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs i0 j0 = (0 :: int))) \<and> (\<forall>(rs1 :: int matrix). matrix_Matrix.rows rs1 = matrix_Matrix.rows rs \<and> columns rs1 = columns rs \<longrightarrow> (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o1) \<and> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < i) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = mul_cell (mdl a) (mdl b) i0 j0) \<and> (\<forall>(i0 :: int) (j0 :: int). (i \<le> i0 \<and> i0 < r) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = (0 :: int)) \<longrightarrow> (let o2 :: int = c - (1 :: int) in ((0 :: int) \<le> o2 + (1 :: int) \<longrightarrow> (\<forall>(j0 :: int). (0 :: int) \<le> j0 \<and> j0 < (0 :: int) \<longrightarrow> elts rs1 i j0 = mul_cell (mdl a) (mdl b) i j0) \<and> (\<forall>(rs2 :: int matrix). matrix_Matrix.rows rs2 = matrix_Matrix.rows rs1 \<and> columns rs2 = columns rs1 \<longrightarrow> (\<forall>(j :: int). ((0 :: int) \<le> j \<and> j \<le> o2) \<and> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> j \<le> j0) \<longrightarrow> elts rs2 i0 j0 = elts rs1 i0 j0) \<and> (\<forall>(j0 :: int). (0 :: int) \<le> j0 \<and> j0 < j \<longrightarrow> elts rs2 i j0 = mul_cell (mdl a) (mdl b) i j0) \<longrightarrow> (let o3 :: int = matrix_Matrix.rows b - (1 :: int) in ((0 :: int) \<le> o3 + (1 :: int) \<longrightarrow> elts rs2 i j = sum (mul_atom (mdl a) (mdl b) i j) (0 :: int) (0 :: int) \<and> (\<forall>(rs3 :: int matrix). matrix_Matrix.rows rs3 = matrix_Matrix.rows rs2 \<and> columns rs3 = columns rs2 \<longrightarrow> (\<forall>(k :: int). ((0 :: int) \<le> k \<and> k \<le> o3) \<and> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> \<not>j0 = j) \<longrightarrow> elts rs3 i0 j0 = elts rs2 i0 j0) \<and> elts rs3 i j = sum (mul_atom (mdl a) (mdl b) i j) (0 :: int) k \<longrightarrow> valid_index b k j \<and> valid_index a i k \<and> valid_index rs3 i j \<and> valid_index rs3 i j \<and> (\<forall>(rs4 :: int matrix). matrix_Matrix.rows rs4 = matrix_Matrix.rows rs3 \<and> columns rs4 = columns rs3 \<longrightarrow> elts rs4 = (elts rs3)(i := (elts rs3 i)(j := elts rs3 i j + elts a i k * elts b k j)) \<longrightarrow> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> \<not>j0 = j) \<longrightarrow> elts rs4 i0 j0 = elts rs2 i0 j0) \<and> elts rs4 i j = sum (mul_atom (mdl a) (mdl b) i j) (0 :: int) (k + (1 :: int)))) \<and> ((\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> \<not>j0 = j) \<longrightarrow> elts rs3 i0 j0 = elts rs2 i0 j0) \<and> elts rs3 i j = sum (mul_atom (mdl a) (mdl b) i j) (0 :: int) (o3 + (1 :: int)) \<longrightarrow> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> j + (1 :: int) \<le> j0) \<longrightarrow> elts rs3 i0 j0 = elts rs1 i0 j0) \<and> (\<forall>(j0 :: int). (0 :: int) \<le> j0 \<and> j0 < j + (1 :: int) \<longrightarrow> elts rs3 i j0 = mul_cell (mdl a) (mdl b) i j0)))) \<and> (o3 + (1 :: int) < (0 :: int) \<longrightarrow> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> j + (1 :: int) \<le> j0) \<longrightarrow> elts rs2 i0 j0 = elts rs1 i0 j0) \<and> (\<forall>(j0 :: int). (0 :: int) \<le> j0 \<and> j0 < j + (1 :: int) \<longrightarrow> elts rs2 i j0 = mul_cell (mdl a) (mdl b) i j0)))) \<and> ((\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < r) \<and> ((0 :: int) \<le> j0 \<and> j0 < c) \<and> (\<not>i0 = i \<or> o2 + (1 :: int) \<le> j0) \<longrightarrow> elts rs2 i0 j0 = elts rs1 i0 j0) \<and> (\<forall>(j0 :: int). (0 :: int) \<le> j0 \<and> j0 < o2 + (1 :: int) \<longrightarrow> elts rs2 i j0 = mul_cell (mdl a) (mdl b) i j0) \<longrightarrow> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < i + (1 :: int)) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs2 i0 j0 = mul_cell (mdl a) (mdl b) i0 j0) \<and> (\<forall>(i0 :: int) (j0 :: int). (i + (1 :: int) \<le> i0 \<and> i0 < r) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs2 i0 j0 = (0 :: int))))) \<and> (o2 + (1 :: int) < (0 :: int) \<longrightarrow> (\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < i + (1 :: int)) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = mul_cell (mdl a) (mdl b) i0 j0) \<and> (\<forall>(i0 :: int) (j0 :: int). (i + (1 :: int) \<le> i0 \<and> i0 < r) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = (0 :: int))))) \<and> ((\<forall>(i0 :: int) (j0 :: int). ((0 :: int) \<le> i0 \<and> i0 < o1 + (1 :: int)) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = mul_cell (mdl a) (mdl b) i0 j0) \<and> (\<forall>(i0 :: int) (j0 :: int). (o1 + (1 :: int) \<le> i0 \<and> i0 < r) \<and> (0 :: int) \<le> j0 \<and> j0 < c \<longrightarrow> elts rs1 i0 j0 = (0 :: int)) \<longrightarrow> matrices_MyMatrix.rows (mdl rs1) = matrices_MyMatrix.rows (mdl a) \<and> cols (mdl rs1) = cols (mdl b) \<and> mdl rs1 = mul (mdl a) (mdl b)))) \<and> (o1 + (1 :: int) < (0 :: int) \<longrightarrow> matrices_MyMatrix.rows (mdl rs) = matrices_MyMatrix.rows (mdl a) \<and> cols (mdl rs) = cols (mdl b) \<and> mdl rs = mul (mdl a) (mdl b))))"
  sorry
end
