theory vstte10_max_sum_MaxAndSum2_max_sumqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_Sum"
begin
definition is_max :: "int list \<Rightarrow> int \<Rightarrow> int \<Rightarrow> int \<Rightarrow> _"
  where "is_max a l h m \<longleftrightarrow> (\<forall>(k :: int). l \<le> k \<and> k < h \<longrightarrow> a ! nat k \<le> m) \<and> (h \<le> l \<and> m = (0 :: int) \<or> l < h \<and> (\<exists>(k :: int). (l \<le> k \<and> k < h) \<and> m = a ! nat k))" for a l h m
theorem max_sum'vc:
  fixes a :: "int list"
  assumes fact0: "\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length a) \<longrightarrow> (0 :: int) \<le> a ! nat i"
  shows "let o1 :: int = int (length a) - (1 :: int) in ((0 :: int) \<le> o1 + (1 :: int) \<longrightarrow> ((0 :: int) = sum_list (drop (0 :: nat) (take ((0 :: nat) - (0 :: nat)) a)) \<and> is_max a (0 :: int) (0 :: int) (0 :: int) \<and> (0 :: int) \<le> (0 :: int) * (0 :: int)) \<and> (\<forall>(m :: int) (s :: int). (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o1) \<and> s = sum_list (drop (0 :: nat) (take (nat i - (0 :: nat)) a)) \<and> is_max a (0 :: int) i m \<and> s \<le> i * m \<longrightarrow> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> (if m < a ! nat i then ((0 :: int) \<le> i \<and> i < int (length a)) \<and> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> s + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> is_max a (0 :: int) (i + (1 :: int)) (a ! nat i) \<and> s + a ! nat i \<le> (i + (1 :: int)) * a ! nat i else ((0 :: int) \<le> i \<and> i < int (length a)) \<and> s + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> is_max a (0 :: int) (i + (1 :: int)) m \<and> s + a ! nat i \<le> (i + (1 :: int)) * m)) \<and> (s = sum_list (drop (0 :: nat) (take (nat (o1 + (1 :: int)) - (0 :: nat)) a)) \<and> is_max a (0 :: int) (o1 + (1 :: int)) m \<and> s \<le> (o1 + (1 :: int)) * m \<longrightarrow> s = sum_list (drop (0 :: nat) (take (length a - (0 :: nat)) a)) \<and> is_max a (0 :: int) (int (length a)) m \<and> s \<le> int (length a) * m))) \<and> (o1 + (1 :: int) < (0 :: int) \<longrightarrow> (0 :: int) = sum_list (drop (0 :: nat) (take (length a - (0 :: nat)) a)) \<and> is_max a (0 :: int) (int (length a)) (0 :: int) \<and> (0 :: int) \<le> int (length a) * (0 :: int))"
  sorry
end
