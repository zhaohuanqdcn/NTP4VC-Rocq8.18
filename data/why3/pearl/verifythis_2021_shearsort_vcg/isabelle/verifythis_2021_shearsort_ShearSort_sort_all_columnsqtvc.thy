theory verifythis_2021_shearsort_ShearSort_sort_all_columnsqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_NumOf" "Why3STD.int_Sum" "Why3STD.map_MapExt" "Why3STD.map_MapPermut" "Why3STD.matrix_Matrix"
begin
consts column :: "'a matrix \<Rightarrow> int \<Rightarrow> int \<Rightarrow> 'a"
axiomatization where column'def:   "column m j i = elts m i j"
  for m :: "'a matrix"
  and j :: "int"
  and i :: "int"
consts moccf :: "'a \<Rightarrow> (int \<Rightarrow> int \<Rightarrow> 'a) \<Rightarrow> int \<Rightarrow> int \<Rightarrow> int"
axiomatization where moccf'def:   "moccf x e c i = int (map_occ x (e i) (0 :: int) c)"
  for x :: "'a"
  and e :: "int \<Rightarrow> int \<Rightarrow> 'a"
  and c :: "int"
  and i :: "int"
definition mocc :: "'a \<Rightarrow> (int \<Rightarrow> int \<Rightarrow> 'a) \<Rightarrow> int \<Rightarrow> int \<Rightarrow> int"
  where "mocc x e r c = sum (moccf x e c) (0 :: int) r" for x e r c
consts compose :: "('b \<Rightarrow> 'c) \<Rightarrow> ('a \<Rightarrow> 'b) \<Rightarrow> 'a \<Rightarrow> 'c"
axiomatization where compose'def:   "compose g f x = g (f x)"
  for g :: "'b \<Rightarrow> 'c"
  and f :: "'a \<Rightarrow> 'b"
  and x :: "'a"
theorem sort_all_columns'vc:
  fixes m :: "int matrix"
  shows "\<exists>(result :: bool). result = True \<or> rows m = columns m"
  and "\<forall>(o1 :: bool). o1 = True \<or> rows m = columns m \<longrightarrow> (if o1 = True then let o2 :: int = columns m - (1 :: int) in ((0 :: int) \<le> o2 + (1 :: int) \<longrightarrow> ((\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m \<longrightarrow> permut (column m j) (column m j) (0 :: int) (rows m)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m) \<and> (0 :: int) \<le> j \<and> j < (0 :: int) \<longrightarrow> elts m i j \<le> elts m k j)) \<and> (\<forall>(m1 :: int matrix). rows m1 = rows m \<and> columns m1 = columns m \<longrightarrow> (\<forall>(tid :: int). ((0 :: int) \<le> tid \<and> tid \<le> o2) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m1 \<longrightarrow> permut (column m1 j) (column m j) (0 :: int) (rows m1)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m1) \<and> (0 :: int) \<le> j \<and> j < tid \<longrightarrow> elts m1 i j \<le> elts m1 k j) \<longrightarrow> ((0 :: int) \<le> tid \<and> tid < columns m1) \<and> (\<forall>(m2 :: int matrix). rows m2 = rows m1 \<and> columns m2 = columns m1 \<longrightarrow> (\<forall>(i :: int) (k :: int). (0 :: int) \<le> i \<and> i < rows m2 \<and> ((0 :: int) \<le> k \<and> k < columns m2) \<and> \<not>k = tid \<longrightarrow> elts m2 i k = elts m1 i k) \<and> (\<forall>(i :: int) (k :: int). (0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m2 \<longrightarrow> elts m2 i tid \<le> elts m2 k tid) \<and> permut (column m2 tid) (column m1 tid) (0 :: int) (rows m2) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m2 \<longrightarrow> permut (column m2 j) (column m j) (0 :: int) (rows m2)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m2) \<and> (0 :: int) \<le> j \<and> j < tid + (1 :: int) \<longrightarrow> elts m2 i j \<le> elts m2 k j))) \<and> ((\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m1 \<longrightarrow> permut (column m1 j) (column m j) (0 :: int) (rows m1)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m1) \<and> (0 :: int) \<le> j \<and> j < o2 + (1 :: int) \<longrightarrow> elts m1 i j \<le> elts m1 k j) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m1 \<longrightarrow> permut (column m1 j) (column m j) (0 :: int) (rows m1)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m1) \<and> (0 :: int) \<le> j \<and> j < columns m1 \<longrightarrow> elts m1 i j \<le> elts m1 k j)))) \<and> (o2 + (1 :: int) < (0 :: int) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m \<longrightarrow> permut (column m j) (column m j) (0 :: int) (rows m)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m) \<and> (0 :: int) \<le> j \<and> j < columns m \<longrightarrow> elts m i j \<le> elts m k j)) else let n :: int = rows m in rows m = columns m \<and> (\<forall>(m1 :: int matrix). rows m1 = rows m \<and> columns m1 = columns m \<longrightarrow> (\<forall>(i :: int) (j :: int). ((0 :: int) \<le> i \<and> i < rows m1) \<and> (0 :: int) \<le> j \<and> j < columns m1 \<longrightarrow> elts m i j = elts m1 j i) \<longrightarrow> (let o2 :: int = columns m1 - (1 :: int) in ((0 :: int) \<le> o2 + (1 :: int) \<longrightarrow> ((\<forall>(j :: int). (0 :: int) \<le> j \<and> j < n \<longrightarrow> permut (elts m1 j) (column m j) (0 :: int) n) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < n) \<and> (0 :: int) \<le> j \<and> j < (0 :: int) \<longrightarrow> elts m1 j i \<le> elts m1 j k)) \<and> (\<forall>(m2 :: int matrix). rows m2 = rows m1 \<and> columns m2 = columns m1 \<longrightarrow> (\<forall>(tid :: int). ((0 :: int) \<le> tid \<and> tid \<le> o2) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < n \<longrightarrow> permut (elts m2 j) (column m j) (0 :: int) n) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < n) \<and> (0 :: int) \<le> j \<and> j < tid \<longrightarrow> elts m2 j i \<le> elts m2 j k) \<longrightarrow> ((0 :: int) \<le> tid \<and> tid < rows m2) \<and> (\<forall>(m3 :: int matrix). rows m3 = rows m2 \<and> columns m3 = columns m2 \<longrightarrow> (\<forall>(j :: int) (k :: int). (0 :: int) \<le> j \<and> j < rows m3 \<and> ((0 :: int) \<le> k \<and> k < columns m3) \<and> \<not>j = tid \<longrightarrow> elts m3 j k = elts m2 j k) \<and> (\<forall>(j :: int) (k :: int). (0 :: int) \<le> j \<and> j \<le> k \<and> k < columns m3 \<longrightarrow> elts m3 tid j \<le> elts m3 tid k) \<and> permut (elts m3 tid) (elts m2 tid) (0 :: int) (columns m3) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < n \<longrightarrow> permut (elts m3 j) (column m j) (0 :: int) n) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < n) \<and> (0 :: int) \<le> j \<and> j < tid + (1 :: int) \<longrightarrow> elts m3 j i \<le> elts m3 j k))) \<and> ((\<forall>(j :: int). (0 :: int) \<le> j \<and> j < n \<longrightarrow> permut (elts m2 j) (column m j) (0 :: int) n) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < n) \<and> (0 :: int) \<le> j \<and> j < o2 + (1 :: int) \<longrightarrow> elts m2 j i \<le> elts m2 j k) \<longrightarrow> rows m2 = columns m2 \<and> (\<forall>(m3 :: int matrix). rows m3 = rows m2 \<and> columns m3 = columns m2 \<longrightarrow> (\<forall>(i :: int) (j :: int). ((0 :: int) \<le> i \<and> i < rows m3) \<and> (0 :: int) \<le> j \<and> j < columns m3 \<longrightarrow> elts m2 i j = elts m3 j i) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m3 \<longrightarrow> permut (column m3 j) (column m j) (0 :: int) (rows m3)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m3) \<and> (0 :: int) \<le> j \<and> j < columns m3 \<longrightarrow> elts m3 i j \<le> elts m3 k j))))) \<and> (o2 + (1 :: int) < (0 :: int) \<longrightarrow> rows m1 = columns m1 \<and> (\<forall>(m2 :: int matrix). rows m2 = rows m1 \<and> columns m2 = columns m1 \<longrightarrow> (\<forall>(i :: int) (j :: int). ((0 :: int) \<le> i \<and> i < rows m2) \<and> (0 :: int) \<le> j \<and> j < columns m2 \<longrightarrow> elts m1 i j = elts m2 j i) \<longrightarrow> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j < columns m2 \<longrightarrow> permut (column m2 j) (column m j) (0 :: int) (rows m2)) \<and> (\<forall>(i :: int) (j :: int) (k :: int). ((0 :: int) \<le> i \<and> i \<le> k \<and> k < rows m2) \<and> (0 :: int) \<le> j \<and> j < columns m2 \<longrightarrow> elts m2 i j \<le> elts m2 k j))))))"
  sorry
end
