theory mpz_cmp_Zcmp_wmpz_cmp_siqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.map_Const" "Why3STD.map_MapEq" "mach.int_Unsigned" "mach.c_C" "../../lib/isabelle/lemmas_Lemmas" "../../lib/isabelle/types_Config" "../../lib/isabelle/types_Types" "../../lib/isabelle/types_Int32Eq" "../../lib/isabelle/types_UInt64Eq" "../../lib/isabelle/compare_Compare" "../../lib/isabelle/ptralias_Alias" "../../lib/isabelle/mpz_Z" "../../lib/isabelle/mpz_Zutil" "../../lib/isabelle/mpz_getset_Set"
begin
theorem wmpz_cmp_si'vc:
  fixes mpz :: "mpz_memo"
  fixes u :: "mpz_ptr"
  fixes v_digit :: "64 word"
  assumes fact0: "(0 :: int) \<le> readers mpz u"
  assumes fact1: "abs_size mpz u < (2147483647 :: int)"
  shows "-(2 :: int) < readers mpz u"
  and "\<forall>(usize :: 32 word). sint usize = sgn mpz u * abs_size mpz u \<longrightarrow> (\<forall>(o1 :: 32 word). (if sint v_digit < (0 :: int) then o1 = (1 :: 32 word) else o1 = (0 :: 32 word)) \<longrightarrow> (\<forall>(o2 :: 32 word). (if (0 :: int) < sint v_digit then o2 = (1 :: 32 word) else o2 = (0 :: 32 word)) \<longrightarrow> int'32_in_bounds (sint o2 - sint o1) \<and> (\<forall>(vsize :: 32 word). sint vsize = sint o2 - sint o1 \<longrightarrow> (\<forall>(o3 :: bool). (sint usize = sint (0 :: 32 word) \<longrightarrow> o3 = True) \<and> (o3 = True \<longrightarrow> usize = (0 :: 32 word)) \<longrightarrow> (\<forall>(o4 :: bool). (if o3 = True then o4 = True else \<exists>(o5 :: bool). ((sint usize = sint vsize \<longrightarrow> o5 = True) \<and> (o5 = True \<longrightarrow> usize = vsize)) \<and> o4 = (if o5 = True then False else True)) \<longrightarrow> (if o4 = True then int'32_in_bounds (sint usize - sint vsize) \<and> (\<forall>(r :: 32 word). sint r = sint usize - sint vsize \<longrightarrow> (\<forall>(w :: mpz_ptr). mpz_unchanged w mpz mpz) \<and> ((0 :: int) < sint r \<longrightarrow> sint v_digit < value_of u mpz) \<and> (sint r < (0 :: int) \<longrightarrow> value_of u mpz < sint v_digit) \<and> (sint r = (0 :: int) \<longrightarrow> value_of u mpz = sint v_digit)) else (0 :: int) \<le> readers mpz u \<and> (\<forall>(mpz1 :: mpz_memo). abs_value_of mpz1 = abs_value_of mpz \<and> alloc mpz1 = alloc mpz \<and> abs_size mpz1 = abs_size mpz \<and> sgn mpz1 = sgn mpz \<and> zones mpz1 = zones mpz \<longrightarrow> (\<forall>(up :: 64 word ptr). readers mpz1 u = readers mpz u + (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>u = y \<longrightarrow> readers mpz1 y = readers mpz y) \<and> value up (abs_size mpz1 u) = abs_value_of mpz1 u \<and> plength up = alloc mpz1 u \<and> offset up = (0 :: int) \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up \<and> zone1 up = zones mpz1 u \<longrightarrow> (c_C.min up \<le> offset up \<and> offset up < c_C.max up) \<and> (let ul :: 64 word = pelts up (offset up) in \<forall>(vl :: 64 word). uint vl = abs (sint v_digit) \<longrightarrow> (zones mpz1 u = zone1 up \<and> (1 :: int) \<le> readers mpz1 u \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up) \<and> (\<forall>(mpz2 :: mpz_memo). abs_value_of mpz2 = abs_value_of mpz1 \<and> alloc mpz2 = alloc mpz1 \<and> abs_size mpz2 = abs_size mpz1 \<and> sgn mpz2 = sgn mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> readers mpz2 u = readers mpz1 u - (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = u \<longrightarrow> readers mpz2 y = readers mpz1 y) \<longrightarrow> (\<forall>(o5 :: bool). (uint ul = uint vl \<longrightarrow> o5 = True) \<and> (o5 = True \<longrightarrow> ul = vl) \<longrightarrow> (if o5 = True then (\<forall>(w :: mpz_ptr). mpz_unchanged w mpz2 mpz) \<and> ((0 :: int) < (0 :: int) \<longrightarrow> sint v_digit < value_of u mpz2) \<and> ((0 :: int) < (0 :: int) \<longrightarrow> value_of u mpz2 < sint v_digit) \<and> value_of u mpz2 = sint v_digit else if uint vl < uint ul then (\<forall>(w :: mpz_ptr). mpz_unchanged w mpz2 mpz) \<and> ((0 :: int) < sint usize \<longrightarrow> sint v_digit < value_of u mpz2) \<and> (sint usize < (0 :: int) \<longrightarrow> value_of u mpz2 < sint v_digit) \<and> (sint usize = (0 :: int) \<longrightarrow> value_of u mpz2 = sint v_digit) else int'32_in_bounds (-sint usize) \<and> (\<forall>(r :: 32 word). sint r = -sint usize \<longrightarrow> (\<forall>(w :: mpz_ptr). mpz_unchanged w mpz2 mpz) \<and> ((0 :: int) < sint r \<longrightarrow> sint v_digit < value_of u mpz2) \<and> (sint r < (0 :: int) \<longrightarrow> value_of u mpz2 < sint v_digit) \<and> (sint r = (0 :: int) \<longrightarrow> value_of u mpz2 = sint v_digit))))))))))))))"
  sorry
end
