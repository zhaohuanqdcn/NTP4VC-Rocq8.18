import Why3.Base
import Why3.why3.Ref.Ref
import Why3.map.MapEq
import Why3.map.MapExchange
import Why3.map.MapPermut
import Why3.array.IntArraySorted
open Classical
open Lean4Why3
namespace bubble_sort_TAOCP_bubble_sortqtvc
theorem bubble_sort'vc (a : List ℤ) : let n : ℤ := Int.ofNat (List.length a); (n ≤ n ∧ List.Perm a a ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < n ∧ n ≤ i2 ∧ i2 < n → a[Int.toNat i1]! ≤ a[Int.toNat i2]!) ∧ IntArraySorted.sorted_sub1 a n n) ∧ (∀(bound : ℤ) (a1 : List ℤ), List.length a1 = List.length a → bound ≤ n ∧ List.Perm a a1 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a1[Int.toNat i1]! ≤ a1[Int.toNat i2]!) ∧ IntArraySorted.sorted_sub1 a1 bound n → (if (2 : ℤ) ≤ bound then let o1 : ℤ := bound - (2 : ℤ); ((0 : ℤ) ≤ o1 + (1 : ℤ) → ((0 : ℤ) ≤ (0 : ℤ) ∧ List.Perm a a1 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a1[Int.toNat i1]! ≤ a1[Int.toNat i2]!) ∧ (∀(i : ℤ), (0 : ℤ) ≤ i ∧ i ≤ (0 : ℤ) → a1[Int.toNat i]! ≤ a1[(0 : ℕ)]!) ∧ IntArraySorted.sorted_sub1 a1 (0 : ℤ) ((0 : ℤ) + (1 : ℤ)) ∧ IntArraySorted.sorted_sub1 a1 bound n) ∧ (∀(t : ℤ) (a2 : List ℤ), List.length a2 = List.length a1 → (∀(j : ℤ), ((0 : ℤ) ≤ j ∧ j ≤ o1) ∧ ((0 : ℤ) ≤ t ∧ t ≤ j) ∧ List.Perm a a2 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a2[Int.toNat i1]! ≤ a2[Int.toNat i2]!) ∧ (∀(i : ℤ), (0 : ℤ) ≤ i ∧ i ≤ t → a2[Int.toNat i]! ≤ a2[Int.toNat t]!) ∧ IntArraySorted.sorted_sub1 a2 t (j + (1 : ℤ)) ∧ IntArraySorted.sorted_sub1 a2 bound n → (let o2 : ℤ := j + (1 : ℤ); ((0 : ℤ) ≤ o2 ∧ o2 < Int.ofNat (List.length a2)) ∧ ((0 : ℤ) ≤ j ∧ j < Int.ofNat (List.length a2)) ∧ (if a2[Int.toNat o2]! < a2[Int.toNat j]! then let o3 : ℤ := j + (1 : ℤ); (((0 : ℤ) ≤ j ∧ j < Int.ofNat (List.length a2)) ∧ (0 : ℤ) ≤ o3 ∧ o3 < Int.ofNat (List.length a2)) ∧ (∀(a3 : List ℤ), List.length a3 = List.length a2 → Lean4Why3.arrayExchange a2 a3 j o3 → ((0 : ℤ) ≤ j + (1 : ℤ) ∧ j + (1 : ℤ) ≤ j + (1 : ℤ)) ∧ List.Perm a a3 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a3[Int.toNat i1]! ≤ a3[Int.toNat i2]!) ∧ (∀(i : ℤ), (0 : ℤ) ≤ i ∧ i ≤ j + (1 : ℤ) → a3[Int.toNat i]! ≤ a3[Int.toNat (j + (1 : ℤ))]!) ∧ IntArraySorted.sorted_sub1 a3 (j + (1 : ℤ)) (j + (1 : ℤ) + (1 : ℤ)) ∧ IntArraySorted.sorted_sub1 a3 bound n) else ((0 : ℤ) ≤ t ∧ t ≤ j + (1 : ℤ)) ∧ List.Perm a a2 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a2[Int.toNat i1]! ≤ a2[Int.toNat i2]!) ∧ (∀(i : ℤ), (0 : ℤ) ≤ i ∧ i ≤ t → a2[Int.toNat i]! ≤ a2[Int.toNat t]!) ∧ IntArraySorted.sorted_sub1 a2 t (j + (1 : ℤ) + (1 : ℤ)) ∧ IntArraySorted.sorted_sub1 a2 bound n))) ∧ (((0 : ℤ) ≤ t ∧ t ≤ o1 + (1 : ℤ)) ∧ List.Perm a a2 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < bound ∧ bound ≤ i2 ∧ i2 < n → a2[Int.toNat i1]! ≤ a2[Int.toNat i2]!) ∧ (∀(i : ℤ), (0 : ℤ) ≤ i ∧ i ≤ t → a2[Int.toNat i]! ≤ a2[Int.toNat t]!) ∧ IntArraySorted.sorted_sub1 a2 t (o1 + (1 : ℤ) + (1 : ℤ)) ∧ IntArraySorted.sorted_sub1 a2 bound n → ((0 : ℤ) ≤ bound ∧ t < bound) ∧ t ≤ n ∧ List.Perm a a2 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < t ∧ t ≤ i2 ∧ i2 < n → a2[Int.toNat i1]! ≤ a2[Int.toNat i2]!) ∧ IntArraySorted.sorted_sub1 a2 t n))) ∧ (o1 + (1 : ℤ) < (0 : ℤ) → ((0 : ℤ) ≤ bound ∧ (0 : ℤ) < bound) ∧ (0 : ℤ) ≤ n ∧ List.Perm a a1 ∧ (∀(i1 : ℤ) (i2 : ℤ), (0 : ℤ) ≤ i1 ∧ i1 < (0 : ℤ) ∧ (0 : ℤ) ≤ i2 ∧ i2 < n → a1[Int.toNat i1]! ≤ a1[Int.toNat i2]!) ∧ IntArraySorted.sorted_sub1 a1 (0 : ℤ) n) else List.Perm a a1 ∧ IntArraySorted.sorted a1))
  := sorry
end bubble_sort_TAOCP_bubble_sortqtvc
