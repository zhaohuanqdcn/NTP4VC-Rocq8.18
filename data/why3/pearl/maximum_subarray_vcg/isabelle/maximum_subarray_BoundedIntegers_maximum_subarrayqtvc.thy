theory maximum_subarray_BoundedIntegers_maximum_subarrayqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_Sum"
begin
consts fc :: "63 word array63 \<Rightarrow> int \<Rightarrow> int"
axiomatization where fc'def:   "fc a i = sint (array63_elts a ! nat i)"
  for a :: "63 word array63"
  and i :: "int"
definition sum :: "63 word array63 \<Rightarrow> int \<Rightarrow> int \<Rightarrow> int"
  where "sum a lo hi = int_Sum.sum (fc a) lo hi" for a lo hi
theorem maximum_subarray'vc:
  fixes a :: "63 word array63"
  assumes fact0: "\<forall>(l :: int) (h :: int). (0 :: int) \<le> l \<and> l \<le> h \<and> h \<le> sint (array63_length a) \<longrightarrow> sum a l h \<le> sint int'63_max"
  shows "let n :: 63 word = array63_length a in ((((0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> sint (0 :: 63 word) \<and> sint (0 :: 63 word) \<le> sint n) \<and> (0 :: int) \<le> sint (0 :: 63 word) \<and> sint (0 :: 63 word) = sum a (0 :: int) (0 :: int)) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint (0 :: 63 word) \<longrightarrow> sum a l' h' \<le> sint (0 :: 63 word)) \<and> (((0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> sint (0 :: 63 word)) \<and> sint (0 :: 63 word) = sum a (0 :: int) (sint (0 :: 63 word))) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint (0 :: 63 word) \<longrightarrow> sum a l' (sint (0 :: 63 word)) \<le> sint (0 :: 63 word))) \<and> (\<forall>(i :: 63 word) (s :: 63 word) (l :: int) (ms :: 63 word) (hi :: int) (lo :: int). (((0 :: int) \<le> lo \<and> lo \<le> hi \<and> hi \<le> sint i \<and> sint i \<le> sint n) \<and> (0 :: int) \<le> sint ms \<and> sint ms = sum a lo hi) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint i \<longrightarrow> sum a l' h' \<le> sint ms) \<and> (((0 :: int) \<le> l \<and> l \<le> sint i) \<and> sint s = sum a l (sint i)) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint i \<longrightarrow> sum a l' (sint i) \<le> sint s) \<longrightarrow> (if sint i < sint n then if sint s < sint (0 :: 63 word) then ((0 :: int) \<le> sint i \<and> sint i < sint (array63_length a)) \<and> (if sint ms < sint (array63_elts a ! nat (sint i)) then sint i < (4611686018427387903 :: int) \<and> (\<forall>(i1 :: 63 word). sint i1 = sint i + (1 :: int) \<longrightarrow> ((0 :: int) \<le> sint n - sint i \<and> sint n - sint i1 < sint n - sint i) \<and> (((0 :: int) \<le> sint i \<and> sint i \<le> sint i + (1 :: int) \<and> sint i + (1 :: int) \<le> sint i1 \<and> sint i1 \<le> sint n) \<and> (0 :: int) \<le> sint (array63_elts a ! nat (sint i)) \<and> sint (array63_elts a ! nat (sint i)) = sum a (sint i) (sint i + (1 :: int))) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint i1 \<longrightarrow> sum a l' h' \<le> sint (array63_elts a ! nat (sint i))) \<and> (((0 :: int) \<le> sint i \<and> sint i \<le> sint i1) \<and> sint (array63_elts a ! nat (sint i)) = sum a (sint i) (sint i1)) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint i1 \<longrightarrow> sum a l' (sint i1) \<le> sint (array63_elts a ! nat (sint i)))) else sint i < (4611686018427387903 :: int) \<and> (\<forall>(i1 :: 63 word). sint i1 = sint i + (1 :: int) \<longrightarrow> ((0 :: int) \<le> sint n - sint i \<and> sint n - sint i1 < sint n - sint i) \<and> (((0 :: int) \<le> lo \<and> lo \<le> hi \<and> hi \<le> sint i1 \<and> sint i1 \<le> sint n) \<and> (0 :: int) \<le> sint ms \<and> sint ms = sum a lo hi) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint i1 \<longrightarrow> sum a l' h' \<le> sint ms) \<and> (((0 :: int) \<le> sint i \<and> sint i \<le> sint i1) \<and> sint (array63_elts a ! nat (sint i)) = sum a (sint i) (sint i1)) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint i1 \<longrightarrow> sum a l' (sint i1) \<le> sint (array63_elts a ! nat (sint i))))) else ((0 :: int) \<le> sint i \<and> sint i < sint (array63_length a)) \<and> (let o1 :: 63 word = array63_elts a ! nat (sint i) in int'63_in_bounds (sint s + sint o1) \<and> (\<forall>(s1 :: 63 word). sint s1 = sint s + sint o1 \<longrightarrow> (if sint ms < sint s1 then sint i < (4611686018427387903 :: int) \<and> (\<forall>(i1 :: 63 word). sint i1 = sint i + (1 :: int) \<longrightarrow> ((0 :: int) \<le> sint n - sint i \<and> sint n - sint i1 < sint n - sint i) \<and> (((0 :: int) \<le> l \<and> l \<le> sint i + (1 :: int) \<and> sint i + (1 :: int) \<le> sint i1 \<and> sint i1 \<le> sint n) \<and> (0 :: int) \<le> sint s1 \<and> sint s1 = sum a l (sint i + (1 :: int))) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint i1 \<longrightarrow> sum a l' h' \<le> sint s1) \<and> (((0 :: int) \<le> l \<and> l \<le> sint i1) \<and> sint s1 = sum a l (sint i1)) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint i1 \<longrightarrow> sum a l' (sint i1) \<le> sint s1)) else sint i < (4611686018427387903 :: int) \<and> (\<forall>(i1 :: 63 word). sint i1 = sint i + (1 :: int) \<longrightarrow> ((0 :: int) \<le> sint n - sint i \<and> sint n - sint i1 < sint n - sint i) \<and> (((0 :: int) \<le> lo \<and> lo \<le> hi \<and> hi \<le> sint i1 \<and> sint i1 \<le> sint n) \<and> (0 :: int) \<le> sint ms \<and> sint ms = sum a lo hi) \<and> (\<forall>(l' :: int) (h' :: int). (0 :: int) \<le> l' \<and> l' \<le> h' \<and> h' \<le> sint i1 \<longrightarrow> sum a l' h' \<le> sint ms) \<and> (((0 :: int) \<le> l \<and> l \<le> sint i1) \<and> sint s1 = sum a l (sint i1)) \<and> (\<forall>(l' :: int). (0 :: int) \<le> l' \<and> l' < sint i1 \<longrightarrow> sum a l' (sint i1) \<le> sint s1))))) else (((0 :: int) \<le> lo \<and> lo \<le> hi \<and> hi \<le> sint (array63_length a)) \<and> sint ms = sum a lo hi) \<and> (\<forall>(l1 :: int) (h :: int). (0 :: int) \<le> l1 \<and> l1 \<le> h \<and> h \<le> sint (array63_length a) \<longrightarrow> sum a lo hi \<le> sint ms)))"
  sorry
end
