theory mpz_add_Zadd_wmpz_add_uiqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.map_Const" "Why3STD.map_MapEq" "mach.int_Unsigned" "mach.c_C" "../../lib/isabelle/lemmas_Lemmas" "../../lib/isabelle/types_Config" "../../lib/isabelle/types_Types" "../../lib/isabelle/types_Int32Eq" "../../lib/isabelle/types_UInt64Eq" "../../lib/isabelle/util_Util" "../../lib/isabelle/ptralias_Alias" "../../lib/isabelle/compare_Compare" "../../lib/isabelle/add_Add" "../../lib/isabelle/sub_Sub" "../../lib/isabelle/mpz_Z" "../../lib/isabelle/mpz_Zutil" "../../lib/isabelle/add_1_Add_1" "../../lib/isabelle/sub_1_Sub_1"
begin
theorem wmpz_add_ui'vc:
  fixes mpz :: "mpz_memo"
  fixes w :: "mpz_ptr"
  fixes u :: "mpz_ptr"
  fixes v :: "64 word"
  assumes fact0: "(1 :: int) \<le> alloc mpz w"
  assumes fact1: "(1 :: int) \<le> alloc mpz u"
  assumes fact2: "readers mpz w = (0 :: int)"
  assumes fact3: "readers mpz u = (0 :: int)"
  assumes fact4: "abs_size mpz u < (2147483647 :: int)"
  shows "-(2 :: int) < readers mpz u"
  and "\<forall>(usize :: 32 word). sint usize = sgn mpz u * abs_size mpz u \<longrightarrow> (sint usize = (0 :: int) \<longrightarrow> usize = (0 :: 32 word)) \<longrightarrow> (if usize = (0 :: 32 word) then readers mpz w = (0 :: int) \<and> (\<forall>(mpz1 :: mpz_memo). abs_value_of mpz1 = abs_value_of mpz \<and> alloc mpz1 = alloc mpz \<and> abs_size mpz1 = abs_size mpz \<and> sgn mpz1 = sgn mpz \<and> zones mpz1 = zones mpz \<longrightarrow> (\<forall>(wp :: 64 word ptr). readers mpz1 w = -(1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>w = y \<longrightarrow> readers mpz1 y = readers mpz y) \<and> value wp (abs_size mpz1 w) = abs_value_of mpz1 w \<and> plength wp = alloc mpz1 w \<and> offset wp = (0 :: int) \<and> c_C.min wp = (0 :: int) \<and> c_C.max wp = plength wp \<and> writable wp = True \<and> zone1 wp = zones mpz1 w \<longrightarrow> ((c_C.min wp \<le> offset wp \<and> offset wp < c_C.max wp) \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> pelts wp1 = (pelts wp)(offset wp1 := v) \<longrightarrow> (uint v = (0 :: int) \<longrightarrow> v = (0 :: 64 word)) \<longrightarrow> (\<forall>(o1 :: 32 word). (if \<not>v = (0 :: 64 word) then o1 = (1 :: 32 word) else o1 = (0 :: 32 word)) \<longrightarrow> (zones mpz1 w = zone1 wp1 \<and> readers mpz1 w = -(1 :: int) \<and> offset wp1 = (0 :: int) \<and> c_C.min wp1 = (0 :: int) \<and> c_C.max wp1 = plength wp1 \<and> abs (sint o1) \<le> plength wp1 \<and> plength wp1 = alloc mpz1 w \<and> (\<not>sint o1 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint o1) - (1 :: int)) \<le> value wp1 (abs (sint o1)))) \<and> (\<forall>(mpz2 :: mpz_memo). alloc mpz2 = alloc mpz1 \<and> readers mpz2 = readers mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> mpz_unchanged y mpz2 mpz1) \<and> (sgn mpz2 w = (1 :: int) \<longleftrightarrow> (0 :: int) \<le> sint o1) \<and> (sgn mpz2 w = -(1 :: int) \<longleftrightarrow> sint o1 < (0 :: int)) \<and> abs_size mpz2 w = abs (sint o1) \<and> abs_value_of mpz2 w = value wp1 (abs (sint o1)) \<longrightarrow> (zones mpz2 w = zone1 wp1 \<and> readers mpz2 w = -(1 :: int) \<and> c_C.min wp1 = (0 :: int) \<and> c_C.max wp1 = plength wp1 \<and> abs_value_of mpz2 w = value wp1 (abs_size mpz2 w)) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> alloc mpz3 = alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 w = (0 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> value_of w mpz3 = value_of u mpz + uint v \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz3 mpz) \<and> readers mpz3 w = (0 :: int) \<and> readers mpz3 u = (0 :: int))))))) else -(2147483648 :: int) < sint usize \<and> (\<forall>(abs_usize :: 32 word). sint abs_usize = abs (sint usize) \<longrightarrow> (mpz_eq u w \<longleftrightarrow> u = w) \<longrightarrow> int'32_in_bounds (sint abs_usize + (1 :: int)) \<and> (\<forall>(o1 :: 32 word). sint o1 = sint abs_usize + (1 :: int) \<longrightarrow> (readers mpz w = (0 :: int) \<and> (1 :: int) \<le> alloc mpz w) \<and> (\<forall>(mpz1 :: mpz_memo). sgn mpz1 = sgn mpz \<longrightarrow> (\<forall>(wp :: 64 word ptr). (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> readers mpz1 w = -(1 :: int) \<and> abs_value_of mpz1 w = value wp (abs_size mpz1 w) \<and> zones mpz1 w = zone1 wp \<and> offset wp = (0 :: int) \<and> plength wp = alloc mpz1 w \<and> c_C.min wp = (0 :: int) \<and> c_C.max wp = plength wp \<and> writable wp = True \<and> abs_size mpz1 w = abs_size mpz w \<and> value wp (abs_size mpz w) = abs_value_of mpz w \<and> (if alloc mpz w < sint o1 then alloc mpz1 w = sint o1 else alloc mpz1 w = alloc mpz w) \<longrightarrow> (if (0 :: int) \<le> sint usize then (if mpz_eq u w then (valid wp (sint abs_usize) \<and> (0 :: int) < sint abs_usize \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> (\<forall>(o2 :: 64 word). value wp1 (sint abs_usize) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint o2 = value wp (sint abs_usize) + uint v \<and> ((0 :: int) \<le> uint o2 \<and> uint o2 \<le> (1 :: int)) \<and> (\<forall>(j :: int). j < offset wp1 \<or> offset wp1 + sint abs_usize \<le> j \<longrightarrow> pelts wp1 j = pelts wp j) \<longrightarrow> value wp1 (sint abs_usize) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint o2 = value_of u mpz1 + uint v \<and> ((0 :: int) \<le> uint o2 \<and> uint o2 \<le> (1 :: int)) \<and> (mpz_eq u w \<or> readers mpz1 u = (0 :: int)) \<and> readers mpz1 w = -(1 :: int) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz1 mpz))) else (0 :: int) \<le> readers mpz1 u \<and> (\<forall>(mpz2 :: mpz_memo). abs_value_of mpz2 = abs_value_of mpz1 \<and> alloc mpz2 = alloc mpz1 \<and> abs_size mpz2 = abs_size mpz1 \<and> sgn mpz2 = sgn mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> (\<forall>(up :: 64 word ptr). readers mpz2 u = readers mpz1 u + (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>u = y \<longrightarrow> readers mpz2 y = readers mpz1 y) \<and> value up (abs_size mpz2 u) = abs_value_of mpz2 u \<and> plength up = alloc mpz2 u \<and> offset up = (0 :: int) \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up \<and> zone1 up = zones mpz2 u \<longrightarrow> (valid up (sint abs_usize) \<and> valid wp (sint abs_usize) \<and> (0 :: int) < sint abs_usize \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> (\<forall>(o2 :: 64 word). value wp1 (sint abs_usize) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint o2 = value up (sint abs_usize) + uint v \<and> ((0 :: int) \<le> uint o2 \<and> uint o2 \<le> (1 :: int)) \<and> (\<forall>(j :: int). j < offset wp1 \<or> offset wp1 + sint abs_usize \<le> j \<longrightarrow> pelts wp1 j = pelts wp j) \<longrightarrow> (zones mpz2 u = zone1 up \<and> (1 :: int) \<le> readers mpz2 u \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> alloc mpz3 = alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 u = readers mpz2 u - (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = u \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> value wp1 (sint abs_usize) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint o2 = value_of u mpz1 + uint v \<and> ((0 :: int) \<le> uint o2 \<and> uint o2 \<le> (1 :: int)) \<and> (mpz_eq u w \<or> readers mpz3 u = (0 :: int)) \<and> readers mpz3 w = -(1 :: int) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz3 mpz))))))) \<and> (\<forall>(cy :: 64 word) (wp1 :: 64 word ptr) (mpz2 :: mpz_memo). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> abs_value_of mpz2 = abs_value_of mpz1 \<and> alloc mpz2 = alloc mpz1 \<and> abs_size mpz2 = abs_size mpz1 \<and> sgn mpz2 = sgn mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> value wp1 (sint abs_usize) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint cy = value_of u mpz1 + uint v \<and> ((0 :: int) \<le> uint cy \<and> uint cy \<le> (1 :: int)) \<and> (mpz_eq u w \<or> readers mpz2 u = (0 :: int)) \<and> readers mpz2 w = -(1 :: int) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz2 mpz) \<longrightarrow> ((c_C.min wp1 \<le> offset wp1 + sint abs_usize \<and> offset wp1 + sint abs_usize < c_C.max wp1) \<and> writable wp1 = True) \<and> (\<forall>(wp2 :: 64 word ptr). length (data wp2) = length (data wp1) \<and> offset wp2 = offset wp1 \<and> c_C.min wp2 = c_C.min wp1 \<and> c_C.max wp2 = c_C.max wp1 \<and> writable wp2 = writable wp1 \<and> zone1 wp2 = zone1 wp1 \<longrightarrow> pelts wp2 = (pelts wp1)(offset wp2 + sint abs_usize := cy) \<and> pelts wp2 (offset wp2 + sint abs_usize) = cy \<longrightarrow> uint cy \<le> (2147483647 :: int) \<and> (\<forall>(o2 :: 32 word). sint o2 = uint cy \<longrightarrow> int'32_in_bounds (sint abs_usize + sint o2) \<and> (\<forall>(o3 :: 32 word). sint o3 = sint abs_usize + sint o2 \<longrightarrow> (zones mpz2 w = zone1 wp2 \<and> readers mpz2 w = -(1 :: int) \<and> offset wp2 = (0 :: int) \<and> c_C.min wp2 = (0 :: int) \<and> c_C.max wp2 = plength wp2 \<and> abs (sint o3) \<le> plength wp2 \<and> plength wp2 = alloc mpz2 w \<and> (\<not>sint o3 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint o3) - (1 :: int)) \<le> value wp2 (abs (sint o3)))) \<and> (\<forall>(mpz3 :: mpz_memo). alloc mpz3 = alloc mpz2 \<and> readers mpz3 = readers mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> mpz_unchanged y mpz3 mpz2) \<and> (sgn mpz3 w = (1 :: int) \<longleftrightarrow> (0 :: int) \<le> sint o3) \<and> (sgn mpz3 w = -(1 :: int) \<longleftrightarrow> sint o3 < (0 :: int)) \<and> abs_size mpz3 w = abs (sint o3) \<and> abs_value_of mpz3 w = value wp2 (abs (sint o3)) \<longrightarrow> (zones mpz3 w = zone1 wp2 \<and> readers mpz3 w = -(1 :: int) \<and> c_C.min wp2 = (0 :: int) \<and> c_C.max wp2 = plength wp2 \<and> abs_value_of mpz3 w = value wp2 (abs_size mpz3 w)) \<and> (\<forall>(mpz4 :: mpz_memo). abs_value_of mpz4 = abs_value_of mpz3 \<and> alloc mpz4 = alloc mpz3 \<and> abs_size mpz4 = abs_size mpz3 \<and> sgn mpz4 = sgn mpz3 \<and> zones mpz4 = zones mpz3 \<longrightarrow> readers mpz4 w = (0 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> readers mpz4 y = readers mpz3 y) \<longrightarrow> value_of w mpz4 = value_of u mpz + uint v \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz4 mpz) \<and> readers mpz4 w = (0 :: int) \<and> readers mpz4 u = (0 :: int))))))) else (if mpz_eq u w then (sint abs_usize = (1 :: int) \<longrightarrow> abs_usize = (1 :: 32 word)) \<longrightarrow> (abs_usize = (1 :: 32 word) \<longrightarrow> c_C.min wp \<le> offset wp \<and> offset wp < c_C.max wp) \<and> (\<forall>(o2 :: bool). (if abs_usize = (1 :: 32 word) then o2 = (if uint (pelts wp (offset wp)) < uint v then True else False) else o2 = False) \<longrightarrow> (if o2 = True then (c_C.min wp \<le> offset wp \<and> offset wp < c_C.max wp) \<and> (let o3 :: 64 word = pelts wp (offset wp) in uint'64_in_bounds (uint v - uint o3) \<and> (\<forall>(o4 :: 64 word). uint o4 = uint v - uint o3 \<longrightarrow> ((c_C.min wp \<le> offset wp \<and> offset wp < c_C.max wp) \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> pelts wp1 = (pelts wp)(offset wp1 := o4) \<longrightarrow> sgn_value wp1 (1 :: 32 word) = value_of u mpz1 + uint v \<and> abs (sint (1 :: 32 word)) \<le> sint abs_usize + (1 :: int) \<and> (\<not>sint (1 :: 32 word) = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint (1 :: 32 word)) - (1 :: int)) \<le> value wp1 (abs (sint (1 :: 32 word)))) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz1 mpz) \<and> (mpz_eq u w \<or> readers mpz1 u = (0 :: int)) \<and> readers mpz1 w = -(1 :: int)))) else (valid wp (sint abs_usize) \<and> (0 :: int) < sint abs_usize \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> (\<forall>(x_b :: 64 word). value wp1 (sint abs_usize) - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint x_b = value wp (sint abs_usize) - uint v \<and> ((0 :: int) \<le> uint x_b \<and> uint x_b \<le> (1 :: int)) \<and> (\<forall>(j :: int). j < offset wp1 \<or> offset wp1 + sint abs_usize \<le> j \<longrightarrow> pelts wp1 j = pelts wp j) \<longrightarrow> int'32_in_bounds (sint abs_usize - (1 :: int)) \<and> (\<forall>(o3 :: 32 word). sint o3 = sint abs_usize - (1 :: int) \<longrightarrow> (c_C.min wp1 \<le> offset wp1 + sint o3 \<and> offset wp1 + sint o3 < c_C.max wp1) \<and> (let o4 :: 64 word = pelts wp1 (offset wp1 + sint o3) in (uint o4 = (0 :: int) \<longrightarrow> o4 = (0 :: 64 word)) \<longrightarrow> (\<forall>(o5 :: 32 word). (if o4 = (0 :: 64 word) then o5 = (1 :: 32 word) else o5 = (0 :: 32 word)) \<longrightarrow> int'32_in_bounds (sint abs_usize - sint o5) \<and> (\<forall>(o6 :: 32 word). sint o6 = sint abs_usize - sint o5 \<longrightarrow> int'32_in_bounds (-sint o6) \<and> (\<forall>(o7 :: 32 word). sint o7 = -sint o6 \<longrightarrow> sgn_value wp1 o7 = value_of u mpz1 + uint v \<and> abs (sint o7) \<le> sint abs_usize + (1 :: int) \<and> (\<not>sint o7 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint o7) - (1 :: int)) \<le> value wp1 (abs (sint o7))) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz1 mpz) \<and> (mpz_eq u w \<or> readers mpz1 u = (0 :: int)) \<and> readers mpz1 w = -(1 :: int)))))))))) else (0 :: int) \<le> readers mpz1 u \<and> (\<forall>(mpz2 :: mpz_memo). abs_value_of mpz2 = abs_value_of mpz1 \<and> alloc mpz2 = alloc mpz1 \<and> abs_size mpz2 = abs_size mpz1 \<and> sgn mpz2 = sgn mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> (\<forall>(up :: 64 word ptr). readers mpz2 u = readers mpz1 u + (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>u = y \<longrightarrow> readers mpz2 y = readers mpz1 y) \<and> value up (abs_size mpz2 u) = abs_value_of mpz2 u \<and> plength up = alloc mpz2 u \<and> offset up = (0 :: int) \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up \<and> zone1 up = zones mpz2 u \<longrightarrow> (sint abs_usize = (1 :: int) \<longrightarrow> abs_usize = (1 :: 32 word)) \<longrightarrow> (abs_usize = (1 :: 32 word) \<longrightarrow> c_C.min up \<le> offset up \<and> offset up < c_C.max up) \<and> (\<forall>(o2 :: bool). (if abs_usize = (1 :: 32 word) then o2 = (if uint (pelts up (offset up)) < uint v then True else False) else o2 = False) \<longrightarrow> (if o2 = True then (c_C.min up \<le> offset up \<and> offset up < c_C.max up) \<and> (let o3 :: 64 word = pelts up (offset up) in uint'64_in_bounds (uint v - uint o3) \<and> (\<forall>(o4 :: 64 word). uint o4 = uint v - uint o3 \<longrightarrow> ((c_C.min wp \<le> offset wp \<and> offset wp < c_C.max wp) \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> pelts wp1 = (pelts wp)(offset wp1 := o4) \<longrightarrow> (zones mpz2 u = zone1 up \<and> (1 :: int) \<le> readers mpz2 u \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> alloc mpz3 = alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 u = readers mpz2 u - (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = u \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> sgn_value wp1 (1 :: 32 word) = value_of u mpz1 + uint v \<and> abs (sint (1 :: 32 word)) \<le> sint abs_usize + (1 :: int) \<and> (\<not>sint (1 :: 32 word) = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint (1 :: 32 word)) - (1 :: int)) \<le> value wp1 (abs (sint (1 :: 32 word)))) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz3 mpz) \<and> (mpz_eq u w \<or> readers mpz3 u = (0 :: int)) \<and> readers mpz3 w = -(1 :: int))))) else (valid up (sint abs_usize) \<and> valid wp (sint abs_usize) \<and> (0 :: int) < sint abs_usize \<and> writable wp = True) \<and> (\<forall>(wp1 :: 64 word ptr). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> (\<forall>(x_b :: 64 word). value wp1 (sint abs_usize) - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint abs_usize * uint x_b = value up (sint abs_usize) - uint v \<and> (\<forall>(j :: int). j < offset wp1 \<or> offset wp1 + sint abs_usize \<le> j \<longrightarrow> pelts wp1 j = pelts wp j) \<and> (0 :: int) \<le> uint x_b \<and> uint x_b \<le> (1 :: int) \<longrightarrow> int'32_in_bounds (sint abs_usize - (1 :: int)) \<and> (\<forall>(o3 :: 32 word). sint o3 = sint abs_usize - (1 :: int) \<longrightarrow> (c_C.min wp1 \<le> offset wp1 + sint o3 \<and> offset wp1 + sint o3 < c_C.max wp1) \<and> (let o4 :: 64 word = pelts wp1 (offset wp1 + sint o3) in (uint o4 = (0 :: int) \<longrightarrow> o4 = (0 :: 64 word)) \<longrightarrow> (\<forall>(o5 :: 32 word). (if o4 = (0 :: 64 word) then o5 = (1 :: 32 word) else o5 = (0 :: 32 word)) \<longrightarrow> int'32_in_bounds (sint abs_usize - sint o5) \<and> (\<forall>(o6 :: 32 word). sint o6 = sint abs_usize - sint o5 \<longrightarrow> int'32_in_bounds (-sint o6) \<and> (\<forall>(o7 :: 32 word). sint o7 = -sint o6 \<longrightarrow> (zones mpz2 u = zone1 up \<and> (1 :: int) \<le> readers mpz2 u \<and> c_C.min up = (0 :: int) \<and> c_C.max up = plength up) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> alloc mpz3 = alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 u = readers mpz2 u - (1 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = u \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> sgn_value wp1 o7 = value_of u mpz1 + uint v \<and> abs (sint o7) \<le> sint abs_usize + (1 :: int) \<and> (\<not>sint o7 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint o7) - (1 :: int)) \<le> value wp1 (abs (sint o7))) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz3 mpz) \<and> (mpz_eq u w \<or> readers mpz3 u = (0 :: int)) \<and> readers mpz3 w = -(1 :: int)))))))))))))) \<and> (\<forall>(wp1 :: 64 word ptr) (wsize :: 32 word) (mpz2 :: mpz_memo). length (data wp1) = length (data wp) \<and> offset wp1 = offset wp \<and> c_C.min wp1 = c_C.min wp \<and> c_C.max wp1 = c_C.max wp \<and> writable wp1 = writable wp \<and> zone1 wp1 = zone1 wp \<longrightarrow> abs_value_of mpz2 = abs_value_of mpz1 \<and> alloc mpz2 = alloc mpz1 \<and> abs_size mpz2 = abs_size mpz1 \<and> sgn mpz2 = sgn mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> sgn_value wp1 wsize = value_of u mpz1 + uint v \<and> abs (sint wsize) \<le> sint abs_usize + (1 :: int) \<and> (\<not>sint wsize = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint wsize) - (1 :: int)) \<le> value wp1 (abs (sint wsize))) \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz2 mpz) \<and> (mpz_eq u w \<or> readers mpz2 u = (0 :: int)) \<and> readers mpz2 w = -(1 :: int) \<longrightarrow> (zones mpz2 w = zone1 wp1 \<and> readers mpz2 w = -(1 :: int) \<and> offset wp1 = (0 :: int) \<and> c_C.min wp1 = (0 :: int) \<and> c_C.max wp1 = plength wp1 \<and> abs (sint wsize) \<le> plength wp1 \<and> plength wp1 = alloc mpz2 w \<and> (\<not>sint wsize = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint wsize) - (1 :: int)) \<le> value wp1 (abs (sint wsize)))) \<and> (\<forall>(mpz3 :: mpz_memo). alloc mpz3 = alloc mpz2 \<and> readers mpz3 = readers mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> mpz_unchanged y mpz3 mpz2) \<and> (sgn mpz3 w = (1 :: int) \<longleftrightarrow> (0 :: int) \<le> sint wsize) \<and> (sgn mpz3 w = -(1 :: int) \<longleftrightarrow> sint wsize < (0 :: int)) \<and> abs_size mpz3 w = abs (sint wsize) \<and> abs_value_of mpz3 w = value wp1 (abs (sint wsize)) \<longrightarrow> (zones mpz3 w = zone1 wp1 \<and> readers mpz3 w = -(1 :: int) \<and> c_C.min wp1 = (0 :: int) \<and> c_C.max wp1 = plength wp1 \<and> abs_value_of mpz3 w = value wp1 (abs_size mpz3 w)) \<and> (\<forall>(mpz4 :: mpz_memo). abs_value_of mpz4 = abs_value_of mpz3 \<and> alloc mpz4 = alloc mpz3 \<and> abs_size mpz4 = abs_size mpz3 \<and> sgn mpz4 = sgn mpz3 \<and> zones mpz4 = zones mpz3 \<longrightarrow> readers mpz4 w = (0 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = w \<longrightarrow> readers mpz4 y = readers mpz3 y) \<longrightarrow> value_of w mpz4 = value_of u mpz + uint v \<and> (\<forall>(x :: mpz_ptr). \<not>x = w \<longrightarrow> mpz_unchanged x mpz4 mpz) \<and> readers mpz4 w = (0 :: int) \<and> readers mpz4 u = (0 :: int))))))))))"
  sorry
end
