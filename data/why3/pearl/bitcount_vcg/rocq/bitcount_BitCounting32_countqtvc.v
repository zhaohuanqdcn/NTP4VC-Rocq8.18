From Coq Require Import Strings.String.
From Coq Require Import String Ascii.
From Coq Require Arith.
From stdpp Require Import base.
From stdpp Require Import fin_maps.
From stdpp Require Import gmap.
From stdpp Require Import base gmultiset.
From Coq Require Classical.
From Coq Require Import ZArith.
From stdpp.bitvector Require Import definitions tactics.
From Coq Require Import Sorting.Sorted.
From Coq Require Import Reals.Rbasic_fun.
From Coq Require Import Reals.Abstract.ConstructiveAbs.
From Coq Require Import Reals.Rdefinitions.
From stdpp Require Import list_relations.
From stdpp Require Import list_numbers.
From stdpp Require Import functions.
From Coq Require Import ClassicalEpsilon.
From stdpp Require Import base decidable.
From Coq Require Import ZArith.Zeuclid.
From Coq Require Import ZArith.Znumtheory.
From stdpp Require Import propset.
From Coq Require Import Reals.
Require Import Why3.Base.
Require Import Why3.why3.WellFounded.WellFounded.
Require Import Why3.why3.Ref.Ref.
Require Import Why3.int.NumOf.
Open Scope Z_scope.
Definition step0 (n : bv 32%N) (x1 : bv 32%N) := x1 = bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N)).
Definition step1 (x1 : bv 32%N) (x2 : bv 32%N) := x2 = bv_add (bv_and x1 (858993459%bv : bv 32%N)) (bv_and (bv_shiftr x1 (2%bv : bv 32%N)) (858993459%bv : bv 32%N)).
Definition step2 (x2 : bv 32%N) (x3 : bv 32%N) := x3 = bv_and (bv_add x2 (bv_shiftr x2 (4%bv : bv 32%N))) (252645135%bv : bv 32%N).
Definition step3 (x3 : bv 32%N) (x4 : bv 32%N) := x4 = bv_add x3 (bv_shiftr x3 (8%bv : bv 32%N)).
Definition step4 (x4 : bv 32%N) (x5 : bv 32%N) := x5 = bv_add x4 (bv_shiftr x4 (16%bv : bv 32%N)).
Axiom nth_closure : bv 32%N -> Z -> bool.
Axiom nth_closure_def : forall  (y : bv 32%N) (y1 : Z), nth_closure y y1 = Z.testbit (bv_unsigned y) y1.
Definition count_logic (n : bv 32%N) : Z := numof (nth_closure n) 0%Z 32%Z.
Theorem count'vc (n : bv 32%N) : step0 n (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) ∧ step1 (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) ∧ step2 (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) ∧ step3 (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) ∧ step4 (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (bv_add (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (16%bv : bv 32%N))) ∧ (bv_unsigned (bv_and (bv_add (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (16%bv : bv 32%N))) (63%bv : bv 32%N)) = numof (nth_closure n) 0%Z 32%Z -> bv_unsigned (bv_and (bv_add (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (bv_shiftr (bv_and (bv_add (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (bv_shiftr (bv_add (bv_and (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (858993459%bv : bv 32%N)) (bv_and (bv_shiftr (bv_sub n (bv_and (bv_shiftr n (1%bv : bv 32%N)) (1431655765%bv : bv 32%N))) (2%bv : bv 32%N)) (858993459%bv : bv 32%N))) (4%bv : bv 32%N))) (252645135%bv : bv 32%N)) (8%bv : bv 32%N))) (16%bv : bv 32%N))) (63%bv : bv 32%N)) = count_logic n).
Proof.
Admitted.
