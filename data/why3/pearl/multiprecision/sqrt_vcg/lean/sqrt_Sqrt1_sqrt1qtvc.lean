import Why3.Base
import Why3.why3.Ref.Ref
import Why3.map.Const
import Why3.map.MapEq
import Why3.real.Truncate
import Why3.mach.int.Unsigned
import Why3.mach.c.C
import pearl.multiprecision.lib.lean.lemmas.Lemmas
import pearl.multiprecision.lib.lean.types.Config
import pearl.multiprecision.lib.lean.types.Types
import pearl.multiprecision.lib.lean.types.Int32Eq
import pearl.multiprecision.lib.lean.types.UInt64Eq
import Why3.mach.fxp.Fxp
open Classical
open Lean4Why3
namespace sqrt_Sqrt1_sqrt1qtvc
theorem sqrt1'vc (rp : C.ptr (BitVec 64)) (a0 : BitVec 64) (a : Fxp.fxp) (fact0 : C.valid rp (1 : ℤ)) (fact1 : (4611686018427387904 : ℤ) ≤ BitVec.toUInt a0) (fact2 : C.writable rp = true) (fact3 : Fxp.ival a = a0) (fact4 : Fxp.rval a = Int.to_Real (BitVec.toUInt a0) * Fxp.pow2 (-(64 : ℤ))) (fact5 : Fxp.iexp a = -(64 : ℤ)) : (1 : ℝ) / 4 ≤ Fxp.rval a ∧ Fxp.rval a ≤ (18446744073709551615 : ℝ) / 18446744073709551616 ∧ Fxp.iexp a = -(64 : ℤ) ∧ (∀(x0 : Fxp.fxp), Fxp.iexp x0 = -(8 : ℤ) ∧ ((256 : ℤ) ≤ BitVec.toUInt (Fxp.ival x0) ∧ BitVec.toUInt (Fxp.ival x0) ≤ (511 : ℤ)) ∧ ((1 : ℝ) ≤ Fxp.rval x0 ∧ Fxp.rval x0 ≤ (2 : ℝ)) ∧ (let rsa : ℝ := (1 : ℝ) / Real.sqrt (Fxp.rval a); let e0 : ℝ := (Fxp.rval x0 - rsa) / rsa; -((281 : ℝ) / 100000) ≤ e0 ∧ e0 ≤ (531 : ℝ) / 200000) → ((0 : ℝ) ≤ Fxp.rval a ∧ Fxp.rval a ≤ Int.to_Real (18446744073709551615 : ℤ) * Fxp.pow2 (Fxp.iexp a)) ∧ (∀(a1 : Fxp.fxp), Fxp.rval a1 = Fxp.trunc_at (Fxp.rval a) (Fxp.iexp a + (31 : ℤ)) ∧ Fxp.iexp a1 = Fxp.iexp a + (31 : ℤ) → (∀(o1 : Fxp.fxp), Fxp.ival o1 = (196608 : BitVec 64) ∧ Fxp.rval o1 = Int.to_Real (196608 : ℤ) * Fxp.pow2 (-(49 : ℤ)) ∧ Fxp.iexp o1 = -(49 : ℤ) → (∀(o2 : Fxp.fxp), Fxp.ival o2 = (562949953421312 : BitVec 64) ∧ Fxp.rval o2 = Int.to_Real (562949953421312 : ℤ) * Fxp.pow2 (-(49 : ℤ)) ∧ Fxp.iexp o2 = -(49 : ℤ) → Fxp.iexp o2 = Fxp.iexp o1 ∧ (∀(m1 : Fxp.fxp), Fxp.rval m1 = Fxp.rval o2 - Fxp.rval o1 ∧ Fxp.iexp m1 = Fxp.iexp o2 → (∀(o3 : Fxp.fxp), Fxp.rval o3 = Fxp.rval x0 * Fxp.rval x0 ∧ Fxp.iexp o3 = Fxp.iexp x0 + Fxp.iexp x0 → (∀(o4 : Fxp.fxp), Fxp.rval o4 = Fxp.rval o3 * Fxp.rval a1 ∧ Fxp.iexp o4 = Fxp.iexp o3 + Fxp.iexp a1 → Fxp.iexp m1 = Fxp.iexp o4 ∧ (∀(t1' : Fxp.fxp), Fxp.rval t1' = Fxp.rval m1 - Fxp.rval o4 ∧ Fxp.iexp t1' = Fxp.iexp m1 → (Int.to_Real (-(9223372036854775808 : ℤ)) * Fxp.pow2 (Fxp.iexp t1') ≤ Fxp.rval t1' ∧ Fxp.rval t1' ≤ Int.to_Real (9223372036854775807 : ℤ) * Fxp.pow2 (Fxp.iexp t1')) ∧ (∀(t1 : Fxp.fxp), Fxp.rval t1 = Fxp.trunc_at (Fxp.rval t1') (Fxp.iexp t1' + (16 : ℤ)) ∧ Fxp.iexp t1 = Fxp.iexp t1' + (16 : ℤ) → (∀(o5 : Fxp.fxp), Fxp.rval o5 = Fxp.rval x0 * Fxp.rval t1 ∧ Fxp.iexp o5 = Fxp.iexp x0 + Fxp.iexp t1 → (Int.to_Real (-(9223372036854775808 : ℤ)) * Fxp.pow2 (Fxp.iexp o5) ≤ Fxp.rval o5 ∧ Fxp.rval o5 ≤ Int.to_Real (9223372036854775807 : ℤ) * Fxp.pow2 (Fxp.iexp o5)) ∧ (∀(o6 : Fxp.fxp), Fxp.rval o6 = Fxp.trunc_at (Fxp.rval o5 * Fxp.pow2 (-(1 : ℤ))) (Fxp.iexp o5 + (18 : ℤ) - (1 : ℤ)) ∧ Fxp.iexp o6 = Fxp.iexp o5 + (18 : ℤ) - (1 : ℤ) → (∀(o7 : Fxp.fxp), Fxp.rval o7 = Fxp.rval x0 ∧ Fxp.iexp o7 = Fxp.iexp x0 - BitVec.toUInt (16 : BitVec 64) → Fxp.iexp o7 = Fxp.iexp o6 ∧ (∀(x1 : Fxp.fxp), Fxp.rval x1 = Fxp.rval o7 + Fxp.rval o6 ∧ Fxp.iexp x1 = Fxp.iexp o7 → ((0 : ℝ) ≤ Fxp.rval a ∧ Fxp.rval a ≤ Int.to_Real (18446744073709551615 : ℤ) * Fxp.pow2 (Fxp.iexp a)) ∧ (∀(a2 : Fxp.fxp), Fxp.rval a2 = Fxp.trunc_at (Fxp.rval a) (Fxp.iexp a + (24 : ℤ)) ∧ Fxp.iexp a2 = Fxp.iexp a + (24 : ℤ) → (∀(u1 : Fxp.fxp), Fxp.rval u1 = Fxp.rval x1 * Fxp.rval a2 ∧ Fxp.iexp u1 = Fxp.iexp x1 + Fxp.iexp a2 → ((0 : ℝ) ≤ Fxp.rval u1 ∧ Fxp.rval u1 ≤ Int.to_Real (18446744073709551615 : ℤ) * Fxp.pow2 (Fxp.iexp u1)) ∧ (∀(u2 : Fxp.fxp), Fxp.rval u2 = Fxp.trunc_at (Fxp.rval u1) (Fxp.iexp u1 + (25 : ℤ)) ∧ Fxp.iexp u2 = Fxp.iexp u1 + (25 : ℤ) → (∀(m2 : Fxp.fxp), Fxp.ival m2 = (2473901162496 : BitVec 64) ∧ Fxp.rval m2 = Int.to_Real (2473901162496 : ℤ) * Fxp.pow2 (-(78 : ℤ)) ∧ Fxp.iexp m2 = -(78 : ℤ) → (∀(o8 : Fxp.fxp), Fxp.rval o8 = Fxp.rval u2 * Fxp.rval u2 ∧ Fxp.iexp o8 = Fxp.iexp u2 + Fxp.iexp u2 → (∀(o9 : Fxp.fxp), Fxp.rval o9 = Fxp.rval a ∧ Fxp.iexp o9 = Fxp.iexp a - BitVec.toUInt (14 : BitVec 64) → Fxp.iexp o9 = Fxp.iexp o8 ∧ (∀(o10 : Fxp.fxp), Fxp.rval o10 = Fxp.rval o9 - Fxp.rval o8 ∧ Fxp.iexp o10 = Fxp.iexp o9 → Fxp.iexp o10 = Fxp.iexp m2 ∧ (∀(t2' : Fxp.fxp), Fxp.rval t2' = Fxp.rval o10 - Fxp.rval m2 ∧ Fxp.iexp t2' = Fxp.iexp o10 → (Int.to_Real (-(9223372036854775808 : ℤ)) * Fxp.pow2 (Fxp.iexp t2') ≤ Fxp.rval t2' ∧ Fxp.rval t2' ≤ Int.to_Real (9223372036854775807 : ℤ) * Fxp.pow2 (Fxp.iexp t2')) ∧ (∀(t2 : Fxp.fxp), Fxp.rval t2 = Fxp.trunc_at (Fxp.rval t2') (Fxp.iexp t2' + (24 : ℤ)) ∧ Fxp.iexp t2 = Fxp.iexp t2' + (24 : ℤ) → (∀(o11 : Fxp.fxp), Fxp.rval o11 = Fxp.rval x1 * Fxp.rval t2 ∧ Fxp.iexp o11 = Fxp.iexp x1 + Fxp.iexp t2 → (Int.to_Real (-(9223372036854775808 : ℤ)) * Fxp.pow2 (Fxp.iexp o11) ≤ Fxp.rval o11 ∧ Fxp.rval o11 ≤ Int.to_Real (9223372036854775807 : ℤ) * Fxp.pow2 (Fxp.iexp o11)) ∧ (∀(o12 : Fxp.fxp), Fxp.rval o12 = Fxp.trunc_at (Fxp.rval o11 * Fxp.pow2 (-(1 : ℤ))) (Fxp.iexp o11 + (15 : ℤ) - (1 : ℤ)) ∧ Fxp.iexp o12 = Fxp.iexp o11 + (15 : ℤ) - (1 : ℤ) → Fxp.iexp u1 = Fxp.iexp o12 ∧ (∀(x2 : Fxp.fxp), Fxp.rval x2 = Fxp.rval u1 + Fxp.rval o12 ∧ Fxp.iexp x2 = Fxp.iexp u1 → ((0 : ℝ) ≤ Fxp.rval x2 ∧ Fxp.rval x2 ≤ Int.to_Real (18446744073709551615 : ℤ) * Fxp.pow2 (Fxp.iexp x2)) ∧ (∀(x : Fxp.fxp), Fxp.rval x = Fxp.trunc_at (Fxp.rval x2) (Fxp.iexp x2 + (32 : ℤ)) ∧ Fxp.iexp x = Fxp.iexp x2 + (32 : ℤ) → (let o13 : BitVec 64 := Fxp.ival x; uint'64_in_bounds (BitVec.toUInt o13 * BitVec.toUInt o13) ∧ (∀(o14 : BitVec 64), BitVec.toUInt o14 = BitVec.toUInt o13 * BitVec.toUInt o13 → uint'64_in_bounds (BitVec.toUInt a0 - (1 : ℤ)) ∧ (∀(o15 : BitVec 64), BitVec.toUInt o15 = BitVec.toUInt a0 - (1 : ℤ) → uint'64_in_bounds ((2 : ℤ) * BitVec.toUInt o13) ∧ (∀(o16 : BitVec 64), BitVec.toUInt o16 = (2 : ℤ) * BitVec.toUInt o13 → uint'64_in_bounds (BitVec.toUInt o14 + BitVec.toUInt o16) ∧ (∀(o17 : BitVec 64), BitVec.toUInt o17 = BitVec.toUInt o14 + BitVec.toUInt o16 → (if BitVec.toUInt o17 ≤ BitVec.toUInt o15 then uint'64_in_bounds ((2 : ℤ) * BitVec.toUInt o13) ∧ (∀(o18 : BitVec 64), BitVec.toUInt o18 = (2 : ℤ) * BitVec.toUInt o13 → uint'64_in_bounds (BitVec.toUInt o14 + BitVec.toUInt o18) ∧ (∀(o19 : BitVec 64), BitVec.toUInt o19 = BitVec.toUInt o14 + BitVec.toUInt o18 → uint'64_in_bounds (BitVec.toUInt o19 + (1 : ℤ)) ∧ (∀(o20 : BitVec 64), BitVec.toUInt o20 = BitVec.toUInt o19 + (1 : ℤ) → uint'64_in_bounds (BitVec.toUInt o13 + (1 : ℤ)) ∧ (∀(o21 : BitVec 64), BitVec.toUInt o21 = BitVec.toUInt o13 + (1 : ℤ) → uint'64_in_bounds (BitVec.toUInt a0 - BitVec.toUInt o20) ∧ (∀(o22 : BitVec 64), BitVec.toUInt o22 = BitVec.toUInt a0 - BitVec.toUInt o20 → ((C.min rp ≤ C.offset rp ∧ C.offset rp < C.max rp) ∧ C.writable rp = true) ∧ (∀(rp1 : C.ptr (BitVec 64)), List.length (C.data rp1) = List.length (C.data rp) ∧ C.offset rp1 = C.offset rp ∧ C.min rp1 = C.min rp ∧ C.max rp1 = C.max rp ∧ C.writable rp1 = C.writable rp ∧ C.zone1 rp1 = C.zone1 rp → C.pelts rp1 = Function.update (C.pelts rp) (C.offset rp1) o22 → (BitVec.toUInt o21 * BitVec.toUInt o21 ≤ BitVec.toUInt a0 ∧ BitVec.toUInt a0 < (BitVec.toUInt o21 + (1 : ℤ)) * (BitVec.toUInt o21 + (1 : ℤ))) ∧ BitVec.toUInt o21 * BitVec.toUInt o21 + BitVec.toUInt (C.pelts rp1 (C.offset rp1)) = BitVec.toUInt a0 ∧ BitVec.toUInt (C.pelts rp1 (C.offset rp1)) ≤ (2 : ℤ) * BitVec.toUInt o21)))))) else uint'64_in_bounds (BitVec.toUInt a0 - BitVec.toUInt o14) ∧ (∀(o18 : BitVec 64), BitVec.toUInt o18 = BitVec.toUInt a0 - BitVec.toUInt o14 → ((C.min rp ≤ C.offset rp ∧ C.offset rp < C.max rp) ∧ C.writable rp = true) ∧ (∀(rp1 : C.ptr (BitVec 64)), List.length (C.data rp1) = List.length (C.data rp) ∧ C.offset rp1 = C.offset rp ∧ C.min rp1 = C.min rp ∧ C.max rp1 = C.max rp ∧ C.writable rp1 = C.writable rp ∧ C.zone1 rp1 = C.zone1 rp → C.pelts rp1 = Function.update (C.pelts rp) (C.offset rp1) o18 → (BitVec.toUInt o13 * BitVec.toUInt o13 ≤ BitVec.toUInt a0 ∧ BitVec.toUInt a0 < (BitVec.toUInt o13 + (1 : ℤ)) * (BitVec.toUInt o13 + (1 : ℤ))) ∧ BitVec.toUInt o13 * BitVec.toUInt o13 + BitVec.toUInt (C.pelts rp1 (C.offset rp1)) = BitVec.toUInt a0 ∧ BitVec.toUInt (C.pelts rp1 (C.offset rp1)) ≤ (2 : ℤ) * BitVec.toUInt o13))))))))))))))))))))))))))))))))))
  := sorry
end sqrt_Sqrt1_sqrt1qtvc
