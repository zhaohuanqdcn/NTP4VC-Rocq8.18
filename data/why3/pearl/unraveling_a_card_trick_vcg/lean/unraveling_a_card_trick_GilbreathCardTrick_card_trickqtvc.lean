import Why3.Base
import pearl.unraveling_a_card_trick_vcg.lean.unraveling_a_card_trick.GilbreathCardTrickPure
import Why3.stack.Stack
open Classical
open Lean4Why3
namespace unraveling_a_card_trick_GilbreathCardTrick_card_trickqtvc
theorem card_trick'vc (a : Stack.t ℤ) (d' : Stack.t ℤ) (fact0 : Stack.length a = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m) (fact1 : GilbreathCardTrickPure.suit_ordered (Stack.elts a)) (fact2 : Stack.elts d' = ([] : List ℤ)) : (∃(result : ℤ), (0 : ℤ) ≤ result ∧ result ≤ GilbreathCardTrickPure.n * GilbreathCardTrickPure.m) ∧ (∀(cut : ℤ), (0 : ℤ) ≤ cut ∧ cut ≤ GilbreathCardTrickPure.n * GilbreathCardTrickPure.m → ((1 : ℤ) ≤ cut + (1 : ℤ) → (Stack.length a = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m - (1 : ℤ) + (1 : ℤ) ∧ Stack.length d' = (1 : ℤ) - (1 : ℤ) ∧ Stack.elts a = List.reverse (Stack.elts d') ++ Stack.elts a) ∧ (∀(d_1 : Stack.t ℤ) (a1 : Stack.t ℤ), (∀(i : ℤ), ((1 : ℤ) ≤ i ∧ i ≤ cut) ∧ Stack.length a1 = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m - i + (1 : ℤ) ∧ Stack.length d_1 = i - (1 : ℤ) ∧ Stack.elts a = List.reverse (Stack.elts d_1) ++ Stack.elts a1 → ¬Stack.elts a1 = ([] : List ℤ) ∧ (∀(a2 : Stack.t ℤ) (o1 : ℤ), (match Stack.elts a1 with | ([] : List ℤ) => False | List.cons x t => o1 = x ∧ Stack.elts a2 = t) → (∀(d_2 : Stack.t ℤ), Stack.elts d_2 = List.cons o1 (Stack.elts d_1) → Stack.length a2 = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m - (i + (1 : ℤ)) + (1 : ℤ) ∧ Stack.length d_2 = i + (1 : ℤ) - (1 : ℤ) ∧ Stack.elts a = List.reverse (Stack.elts d_2) ++ Stack.elts a2))) ∧ (Stack.length a1 = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m - (cut + (1 : ℤ)) + (1 : ℤ) ∧ Stack.length d_1 = cut + (1 : ℤ) - (1 : ℤ) ∧ Stack.elts a = List.reverse (Stack.elts d_1) ++ Stack.elts a1 → (∀(d_2 : Stack.t ℤ) (a2 : Stack.t ℤ) (result : Stack.t ℤ), Stack.elts a2 = ([] : List ℤ) ∧ Stack.elts d_2 = ([] : List ℤ) ∧ GilbreathCardTrickPure.shuffle (List.reverse (Stack.elts a1)) (List.reverse (Stack.elts d_1)) (Stack.elts result) → Stack.length result = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m ∧ GilbreathCardTrickPure.suit_sorted (Stack.elts result))))) ∧ (cut + (1 : ℤ) < (1 : ℤ) → (∀(d_1 : Stack.t ℤ) (a1 : Stack.t ℤ) (result : Stack.t ℤ), Stack.elts a1 = ([] : List ℤ) ∧ Stack.elts d_1 = ([] : List ℤ) ∧ GilbreathCardTrickPure.shuffle (List.reverse (Stack.elts a)) (List.reverse (Stack.elts d')) (Stack.elts result) → Stack.length result = GilbreathCardTrickPure.n * GilbreathCardTrickPure.m ∧ GilbreathCardTrickPure.suit_sorted (Stack.elts result))))
  := sorry
end unraveling_a_card_trick_GilbreathCardTrick_card_trickqtvc
