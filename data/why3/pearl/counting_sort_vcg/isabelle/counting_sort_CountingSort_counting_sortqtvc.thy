theory counting_sort_CountingSort_counting_sortqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_NumOf" "./counting_sort_Spec" "Why3STD.array_IntArraySorted"
begin
theorem counting_sort'vc:
  fixes a :: "int list"
  fixes b :: "int list"
  assumes fact0: "k_values a"
  assumes fact1: "length a = length b"
  shows "let o1 :: int = k in (0 :: int) \<le> o1 \<and> (\<forall>(c :: int list). (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < o1 \<longrightarrow> c ! nat i = (0 :: int)) \<and> int (length c) = o1 \<longrightarrow> (let o2 :: int = int (length a) - (1 :: int) in ((0 :: int) \<le> o2 + (1 :: int) \<longrightarrow> (\<forall>(v :: int). (0 :: int) \<le> v \<and> v < k \<longrightarrow> c ! nat v = numeq a v (0 :: int) (0 :: int)) \<and> (\<forall>(c1 :: int list). length c1 = length c \<longrightarrow> (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o2) \<and> (\<forall>(v :: int). (0 :: int) \<le> v \<and> v < k \<longrightarrow> c1 ! nat v = numeq a v (0 :: int) i) \<longrightarrow> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> (let v :: int = a ! nat i in ((0 :: int) \<le> v \<and> v < int (length c1)) \<and> (let o3 :: int = c1 ! nat v + (1 :: int) in ((0 :: int) \<le> v \<and> v < int (length c1)) \<and> (length (c1[nat v := o3]) = length c1 \<longrightarrow> nth (c1[nat v := o3]) o nat = (nth c1 o nat)(v := o3) \<longrightarrow> (\<forall>(v1 :: int). (0 :: int) \<le> v1 \<and> v1 < k \<longrightarrow> c1[nat v := o3] ! nat v1 = numeq a v1 (0 :: int) (i + (1 :: int))))))) \<and> ((\<forall>(v :: int). (0 :: int) \<le> v \<and> v < k \<longrightarrow> c1 ! nat v = numeq a v (0 :: int) (o2 + (1 :: int))) \<longrightarrow> (let o3 :: int = k - (1 :: int) in ((0 :: int) \<le> o3 + (1 :: int) \<longrightarrow> ((0 :: int) = numlt a (0 :: int) (0 :: int) (int (length a)) \<and> sorted_sub1 b (0 :: int) (0 :: int) \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < (0 :: int) \<longrightarrow> (0 :: int) \<le> b ! nat e \<and> b ! nat e < (0 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < (0 :: int) \<longrightarrow> numeq b f (0 :: int) (0 :: int) = numeq a f (0 :: int) (int (length a)))) \<and> (\<forall>(j :: int) (b1 :: int list). length b1 = length b \<longrightarrow> (\<forall>(v :: int). ((0 :: int) \<le> v \<and> v \<le> o3) \<and> j = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<longrightarrow> ((0 :: int) \<le> v \<and> v < int (length c1)) \<and> (let o4 :: int = c1 ! nat v in ((1 :: int) \<le> o4 + (1 :: int) \<longrightarrow> (j - (1 :: int) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<and> numeq b1 v (0 :: int) j = (1 :: int) - (1 :: int)) \<and> (\<forall>(j1 :: int) (b2 :: int list). length b2 = length b1 \<longrightarrow> (\<forall>(i :: int). ((1 :: int) \<le> i \<and> i \<le> o4) \<and> j1 - i + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a))) \<and> numeq b2 v (0 :: int) j1 = i - (1 :: int) \<longrightarrow> ((0 :: int) \<le> j1 \<and> j1 < int (length b2)) \<and> (length (b2[nat j1 := v]) = length b2 \<longrightarrow> nth (b2[nat j1 := v]) o nat = (nth b2 o nat)(j1 := v) \<longrightarrow> j1 + (1 :: int) - (i + (1 :: int)) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 (b2[nat j1 := v]) (0 :: int) (j1 + (1 :: int)) \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 + (1 :: int) \<longrightarrow> (0 :: int) \<le> b2[nat j1 := v] ! nat e \<and> b2[nat j1 := v] ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq (b2[nat j1 := v]) f (0 :: int) (j1 + (1 :: int)) = numeq a f (0 :: int) (int (length a))) \<and> numeq (b2[nat j1 := v]) v (0 :: int) (j1 + (1 :: int)) = i + (1 :: int) - (1 :: int))) \<and> (j1 - (o4 + (1 :: int)) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a))) \<and> numeq b2 v (0 :: int) j1 = o4 + (1 :: int) - (1 :: int) \<longrightarrow> j1 = numlt a (v + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e < v + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v + (1 :: int) \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a)))))) \<and> (o4 + (1 :: int) < (1 :: int) \<longrightarrow> j = numlt a (v + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < v + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v + (1 :: int) \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a)))))) \<and> (j = numlt a (o3 + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < o3 + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < o3 + (1 :: int) \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<longrightarrow> array_IntArraySorted.sorted b1 \<and> permut a b1))) \<and> (o3 + (1 :: int) < (0 :: int) \<longrightarrow> array_IntArraySorted.sorted b \<and> permut a b))))) \<and> (o2 + (1 :: int) < (0 :: int) \<longrightarrow> (let o3 :: int = k - (1 :: int) in ((0 :: int) \<le> o3 + (1 :: int) \<longrightarrow> ((0 :: int) = numlt a (0 :: int) (0 :: int) (int (length a)) \<and> sorted_sub1 b (0 :: int) (0 :: int) \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < (0 :: int) \<longrightarrow> (0 :: int) \<le> b ! nat e \<and> b ! nat e < (0 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < (0 :: int) \<longrightarrow> numeq b f (0 :: int) (0 :: int) = numeq a f (0 :: int) (int (length a)))) \<and> (\<forall>(j :: int) (b1 :: int list). length b1 = length b \<longrightarrow> (\<forall>(v :: int). ((0 :: int) \<le> v \<and> v \<le> o3) \<and> j = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<longrightarrow> ((0 :: int) \<le> v \<and> v < int (length c)) \<and> (let o4 :: int = c ! nat v in ((1 :: int) \<le> o4 + (1 :: int) \<longrightarrow> (j - (1 :: int) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<and> numeq b1 v (0 :: int) j = (1 :: int) - (1 :: int)) \<and> (\<forall>(j1 :: int) (b2 :: int list). length b2 = length b1 \<longrightarrow> (\<forall>(i :: int). ((1 :: int) \<le> i \<and> i \<le> o4) \<and> j1 - i + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a))) \<and> numeq b2 v (0 :: int) j1 = i - (1 :: int) \<longrightarrow> ((0 :: int) \<le> j1 \<and> j1 < int (length b2)) \<and> (length (b2[nat j1 := v]) = length b2 \<longrightarrow> nth (b2[nat j1 := v]) o nat = (nth b2 o nat)(j1 := v) \<longrightarrow> j1 + (1 :: int) - (i + (1 :: int)) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 (b2[nat j1 := v]) (0 :: int) (j1 + (1 :: int)) \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 + (1 :: int) \<longrightarrow> (0 :: int) \<le> b2[nat j1 := v] ! nat e \<and> b2[nat j1 := v] ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq (b2[nat j1 := v]) f (0 :: int) (j1 + (1 :: int)) = numeq a f (0 :: int) (int (length a))) \<and> numeq (b2[nat j1 := v]) v (0 :: int) (j1 + (1 :: int)) = i + (1 :: int) - (1 :: int))) \<and> (j1 - (o4 + (1 :: int)) + (1 :: int) = numlt a v (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e \<le> v) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a))) \<and> numeq b2 v (0 :: int) j1 = o4 + (1 :: int) - (1 :: int) \<longrightarrow> j1 = numlt a (v + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b2 (0 :: int) j1 \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j1 \<longrightarrow> (0 :: int) \<le> b2 ! nat e \<and> b2 ! nat e < v + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v + (1 :: int) \<longrightarrow> numeq b2 f (0 :: int) j1 = numeq a f (0 :: int) (int (length a)))))) \<and> (o4 + (1 :: int) < (1 :: int) \<longrightarrow> j = numlt a (v + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < v + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < v + (1 :: int) \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a)))))) \<and> (j = numlt a (o3 + (1 :: int)) (0 :: int) (int (length a)) \<and> sorted_sub1 b1 (0 :: int) j \<and> (\<forall>(e :: int). (0 :: int) \<le> e \<and> e < j \<longrightarrow> (0 :: int) \<le> b1 ! nat e \<and> b1 ! nat e < o3 + (1 :: int)) \<and> (\<forall>(f :: int). (0 :: int) \<le> f \<and> f < o3 + (1 :: int) \<longrightarrow> numeq b1 f (0 :: int) j = numeq a f (0 :: int) (int (length a))) \<longrightarrow> array_IntArraySorted.sorted b1 \<and> permut a b1))) \<and> (o3 + (1 :: int) < (0 :: int) \<longrightarrow> array_IntArraySorted.sorted b \<and> permut a b)))))"
  sorry
end
