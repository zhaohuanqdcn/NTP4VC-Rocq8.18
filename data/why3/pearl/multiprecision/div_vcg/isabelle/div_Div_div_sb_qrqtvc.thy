theory div_Div_div_sb_qrqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.map_Const" "Why3STD.map_MapEq" "mach.int_Unsigned" "mach.c_C" "../../lib/isabelle/types_Config" "../../lib/isabelle/types_Types" "../../lib/isabelle/types_Int32Eq" "../../lib/isabelle/types_UInt64Eq" "../../lib/isabelle/lemmas_Lemmas" "../../lib/isabelle/compare_Compare" "../../lib/isabelle/util_Util" "../../lib/isabelle/ptralias_Alias" "../../lib/isabelle/util_UtilOld" "../../lib/isabelle/add_Add" "../../lib/isabelle/add_AddOld" "../../lib/isabelle/sub_SubOld" "../../lib/isabelle/logical_LogicalUtil" "../../lib/isabelle/logical_LogicalOld" "../../lib/isabelle/mul_Mul"
begin
definition reciprocal :: "64 word \<Rightarrow> 64 word \<Rightarrow> _"
  where "reciprocal v d \<longleftrightarrow> uint v = (((18446744073709551615 :: int) + (1 :: int)) * ((18446744073709551615 :: int) + (1 :: int)) - (1 :: int)) ediv uint d - ((18446744073709551615 :: int) + (1 :: int))" for v d
definition reciprocal_3by2 :: "64 word \<Rightarrow> 64 word \<Rightarrow> 64 word \<Rightarrow> _"
  where "reciprocal_3by2 v dh dl \<longleftrightarrow> uint v = (((18446744073709551615 :: int) + (1 :: int)) * ((18446744073709551615 :: int) + (1 :: int)) * ((18446744073709551615 :: int) + (1 :: int)) - (1 :: int)) ediv (uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh) - ((18446744073709551615 :: int) + (1 :: int))" for v dh dl
definition normalized :: "64 word ptr \<Rightarrow> 32 word \<Rightarrow> _"
  where "normalized x sz \<longleftrightarrow> valid x (sint sz) \<and> ((18446744073709551615 :: int) + (1 :: int)) ediv (2 :: int) \<le> uint (pelts x (offset x + sint sz - (1 :: int)))" for x sz
theorem div_sb_qr'vc:
  fixes sy :: "32 word"
  fixes sx :: "32 word"
  fixes x :: "64 word ptr"
  fixes y :: "64 word ptr"
  fixes q :: "64 word ptr"
  assumes fact0: "(3 :: int) \<le> sint sy"
  assumes fact1: "sint sy \<le> sint sx"
  assumes fact2: "valid x (sint sx)"
  assumes fact3: "valid y (sint sy)"
  assumes fact4: "valid q (sint sx - sint sy)"
  assumes fact5: "writable q = True"
  assumes fact6: "writable x = True"
  assumes fact7: "normalized y sy"
  shows "int'32_in_bounds (sint sx - (2 :: int))"
  and "\<forall>(o1 :: 32 word). sint o1 = sint sx - (2 :: int) \<longrightarrow> (c_C.min x \<le> offset x + sint o1 \<and> offset x + sint o1 \<le> c_C.max x) \<and> (\<forall>(o2 :: 64 word ptr). offset o2 = offset x + sint o1 \<and> plength o2 = plength x \<and> pelts o2 = pelts x \<and> data o2 = data x \<and> c_C.min o2 = c_C.min x \<and> c_C.max o2 = c_C.max x \<and> zone1 o2 = zone1 x \<and> writable o2 = writable x \<longrightarrow> int'32_in_bounds (sint sx - sint sy) \<and> (\<forall>(o3 :: 32 word). sint o3 = sint sx - sint sy \<longrightarrow> (c_C.min q \<le> offset q + sint o3 \<and> offset q + sint o3 \<le> c_C.max q) \<and> (\<forall>(o4 :: 64 word ptr). offset o4 = offset q + sint o3 \<and> plength o4 = plength q \<and> pelts o4 = pelts q \<and> data o4 = data q \<and> c_C.min o4 = c_C.min q \<and> c_C.max o4 = c_C.max q \<and> zone1 o4 = zone1 q \<and> writable o4 = writable q \<longrightarrow> int'32_in_bounds (sint sy - (1 :: int)) \<and> (\<forall>(o5 :: 32 word). sint o5 = sint sy - (1 :: int) \<longrightarrow> (c_C.min y \<le> offset y + sint o5 \<and> offset y + sint o5 < c_C.max y) \<and> (let dh :: 64 word = pelts y (offset y + sint o5) in int'32_in_bounds (sint sy - (2 :: int)) \<and> (\<forall>(o6 :: 32 word). sint o6 = sint sy - (2 :: int) \<longrightarrow> (c_C.min y \<le> offset y + sint o6 \<and> offset y + sint o6 < c_C.max y) \<and> (let dl :: 64 word = pelts y (offset y + sint o6) in ((18446744073709551615 :: int) + (1 :: int)) ediv (2 :: int) \<le> uint dh \<and> (\<forall>(v :: 64 word). reciprocal_3by2 v dh dl \<longrightarrow> int'32_in_bounds (sint sx - sint sy) \<and> (\<forall>(o7 :: 32 word). sint o7 = sint sx - sint sy \<longrightarrow> int'32_in_bounds ((2 :: int) - sint sy) \<and> (\<forall>(mdn :: 32 word). sint mdn = (2 :: int) - sint sy \<longrightarrow> (c_C.min o2 \<le> offset o2 + sint mdn \<and> offset o2 + sint mdn \<le> c_C.max o2) \<and> (\<forall>(xd :: 64 word ptr). offset xd = offset o2 + sint mdn \<and> plength xd = plength o2 \<and> pelts xd = pelts o2 \<and> data xd = data o2 \<and> c_C.min xd = c_C.min o2 \<and> c_C.max xd = c_C.max o2 \<and> zone1 xd = zone1 o2 \<and> writable xd = writable o2 \<longrightarrow> (let vy :: int = value y (sint sy) in (valid xd (sint sy) \<and> valid y (sint sy)) \<and> (\<forall>(r :: 32 word). sint r = compare_int (value xd (sint sy)) (value y (sint sy)) \<longrightarrow> (\<forall>(qh :: 64 word). (if (0 :: int) \<le> sint r then qh = (1 :: 64 word) else qh = (0 :: 64 word)) \<longrightarrow> (\<forall>(o8 :: bool). (uint qh = uint (0 :: 64 word) \<longrightarrow> o8 = True) \<and> (o8 = True \<longrightarrow> qh = (0 :: 64 word)) \<longrightarrow> \<not>o8 = True \<longrightarrow> (0 :: int) \<le> sint sy \<and> valid xd (sint sy) \<and> valid y (sint sy) \<and> writable xd = True) \<and> (\<forall>(x1 :: 64 word ptr) (xp :: 64 word ptr). (\<exists>(o8 :: bool). ((uint qh = uint (0 :: 64 word) \<longrightarrow> o8 = True) \<and> (o8 = True \<longrightarrow> qh = (0 :: 64 word))) \<and> (if \<not>o8 = True then \<exists>(xd1 :: 64 word ptr). ((data xd1 = data x1 \<and> length (data x1) = length (data xd) \<and> offset xd1 = offset xd \<and> c_C.min xd1 = c_C.min xd \<and> c_C.max xd1 = c_C.max xd \<and> writable xd1 = writable xd \<and> zone1 xd1 = zone1 xd) \<and> (data xp = data x1 \<and> length (data x1) = length (data o2) \<and> offset xp = offset o2 \<and> c_C.min xp = c_C.min o2 \<and> c_C.max xp = c_C.max o2 \<and> writable xp = writable o2 \<and> zone1 xp = zone1 o2) \<and> length (data x1) = length (data x) \<and> offset x1 = offset x \<and> c_C.min x1 = c_C.min x \<and> c_C.max x1 = c_C.max x \<and> writable x1 = writable x \<and> zone1 x1 = zone1 x) \<and> (\<exists>(b :: 64 word). value xd1 (sint sy) - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint b = value xd (sint sy) - value y (sint sy) \<and> ((0 :: int) \<le> uint b \<and> uint b \<le> (1 :: int)) \<and> (\<forall>(j :: int). j < offset xd1 \<or> offset xd1 + sint sy \<le> j \<longrightarrow> pelts xd1 j = pelts xd j)) else x1 = x \<and> xp = o2)) \<longrightarrow> (c_C.min xp \<le> offset xp + (1 :: int) \<and> offset xp + (1 :: int) < c_C.max xp) \<and> (c_C.min xp \<le> offset xp + (1 :: int) \<and> offset xp + (1 :: int) < c_C.max xp) \<and> (((0 :: int) \<le> sint o7 \<and> sint o7 \<le> sint sx - sint sy) \<and> offset o4 = offset q + sint o7 \<and> offset xp = offset x1 + sint sy + sint o7 - (2 :: int) \<and> plength o4 = plength q \<and> c_C.min o4 = c_C.min q \<and> c_C.max o4 = c_C.max q \<and> plength xp = plength x1 \<and> c_C.min xp = c_C.min x1 \<and> c_C.max xp = c_C.max x1 \<and> pelts o4 = pelts q \<and> pelts xp = pelts x1 \<and> (writable o4 = True \<and> writable xp = True) \<and> value x (sint sx) = (value o4 (sint sx - sint sy - sint o7) + uint qh * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy - sint o7)) * vy * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o7 + value x1 (sint sy + sint o7 - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy + sint o7 - (1 :: int)) * uint (pelts xp (offset xp + (1 :: int))) \<and> value_sub (pelts x1) (offset xp + sint mdn) (offset xp + sint mdn + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint (pelts xp (offset xp + (1 :: int))) < vy \<and> uint (pelts x1 (offset xp)) + ((18446744073709551615 :: int) + (1 :: int)) * uint (pelts xp (offset xp + (1 :: int))) \<le> uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh) \<and> (\<forall>(x11 :: 64 word) (i :: 32 word) (qp :: 64 word ptr) (xp1 :: 64 word ptr) (x2 :: 64 word ptr) (q1 :: 64 word ptr). length (data x2) = length (data x1) \<and> offset x2 = offset x1 \<and> c_C.min x2 = c_C.min x1 \<and> c_C.max x2 = c_C.max x1 \<and> writable x2 = writable x1 \<and> zone1 x2 = zone1 x1 \<longrightarrow> length (data q1) = length (data q) \<and> offset q1 = offset q \<and> c_C.min q1 = c_C.min q \<and> c_C.max q1 = c_C.max q \<and> writable q1 = writable q \<and> zone1 q1 = zone1 q \<longrightarrow> ((0 :: int) \<le> sint i \<and> sint i \<le> sint sx - sint sy) \<and> offset qp = offset q1 + sint i \<and> offset xp1 = offset x2 + sint sy + sint i - (2 :: int) \<and> plength qp = plength q1 \<and> c_C.min qp = c_C.min q1 \<and> c_C.max qp = c_C.max q1 \<and> plength xp1 = plength x2 \<and> c_C.min xp1 = c_C.min x2 \<and> c_C.max xp1 = c_C.max x2 \<and> pelts qp = pelts q1 \<and> pelts xp1 = pelts x2 \<and> (writable qp = True \<and> writable xp1 = True) \<and> value x (sint sx) = (value qp (sint sx - sint sy - sint i) + uint qh * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy - sint i)) * vy * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint i + value x2 (sint sy + sint i - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy + sint i - (1 :: int)) * uint x11 \<and> value_sub (pelts x2) (offset xp1 + sint mdn) (offset xp1 + sint mdn + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint x11 < vy \<and> uint (pelts x2 (offset xp1)) + ((18446744073709551615 :: int) + (1 :: int)) * uint x11 \<le> uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh \<longrightarrow> (if (0 :: int) < sint i then int'32_in_bounds (sint i - (1 :: int)) \<and> (\<forall>(o8 :: 32 word). sint o8 = sint i - (1 :: int) \<longrightarrow> (c_C.min xp1 \<le> offset xp1 + -(1 :: int) \<and> offset xp1 + -(1 :: int) \<le> c_C.max xp1) \<and> (\<forall>(o9 :: 64 word ptr). offset o9 = offset xp1 + -(1 :: int) \<and> plength o9 = plength xp1 \<and> pelts o9 = pelts xp1 \<and> data o9 = data xp1 \<and> c_C.min o9 = c_C.min xp1 \<and> c_C.max o9 = c_C.max xp1 \<and> zone1 o9 = zone1 xp1 \<and> writable o9 = writable xp1 \<longrightarrow> (c_C.min o9 \<le> offset o9 + sint mdn \<and> offset o9 + sint mdn \<le> c_C.max o9) \<and> (\<forall>(xd1 :: 64 word ptr). offset xd1 = offset o9 + sint mdn \<and> plength xd1 = plength o9 \<and> pelts xd1 = pelts o9 \<and> data xd1 = data o9 \<and> c_C.min xd1 = c_C.min o9 \<and> c_C.max xd1 = c_C.max o9 \<and> zone1 xd1 = zone1 o9 \<and> writable xd1 = writable o9 \<longrightarrow> (c_C.min o9 \<le> offset o9 + (1 :: int) \<and> offset o9 + (1 :: int) < c_C.max o9) \<and> (let nx0 :: 64 word = pelts o9 (offset o9 + (1 :: int)) in \<forall>(o10 :: bool). (uint x11 = uint dh \<longrightarrow> o10 = True) \<and> (o10 = True \<longrightarrow> x11 = dh) \<longrightarrow> (\<forall>(o11 :: bool). (if o10 = True then (uint nx0 = uint dl \<longrightarrow> o11 = True) \<and> (o11 = True \<longrightarrow> nx0 = dl) else o11 = False) \<longrightarrow> (if o11 = True then value_sub (pelts xd1) (offset xd1 + (1 :: int)) (offset xd1 + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (2 :: int)) * uint dl + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint dh < vy \<and> (value_sub (pelts xd1) (offset xd1 + (1 :: int)) (offset xd1 + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (2 :: int)) * uint dl + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint dh < vy \<longrightarrow> (let o12 :: 64 word list = data x2 in \<forall>(xc :: 64 word list). length xc = length o12 \<and> (\<forall>(i1 :: int). (0 :: int) \<le> i1 \<and> i1 < int (length xc) \<longrightarrow> xc ! nat i1 = o12 ! nat i1) \<longrightarrow> (valid y (sint sy) \<and> valid xd1 (sint sy) \<and> writable xd1 = True) \<and> (\<forall>(xd2 :: 64 word ptr) (xp2 :: 64 word ptr) (x3 :: 64 word ptr). data xd2 = data x3 \<and> length (data x3) = length (data xd1) \<and> offset xd2 = offset xd1 \<and> c_C.min xd2 = c_C.min xd1 \<and> c_C.max xd2 = c_C.max xd1 \<and> writable xd2 = writable xd1 \<and> zone1 xd2 = zone1 xd1 \<longrightarrow> data xp2 = data x3 \<and> length (data x3) = length (data o9) \<and> offset xp2 = offset o9 \<and> c_C.min xp2 = c_C.min o9 \<and> c_C.max xp2 = c_C.max o9 \<and> writable xp2 = writable o9 \<and> zone1 xp2 = zone1 o9 \<longrightarrow> length (data x3) = length (data x2) \<and> offset x3 = offset x2 \<and> c_C.min x3 = c_C.min x2 \<and> c_C.max x3 = c_C.max x2 \<and> writable x3 = writable x2 \<and> zone1 x3 = zone1 x2 \<longrightarrow> (\<forall>(b :: 64 word). value xd2 (sint sy) - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint b = value xd1 (sint sy) - value y (sint sy) * uint uint'64_max \<and> (\<forall>(j :: int). j < offset xd2 \<or> offset xd2 + sint sy \<le> j \<longrightarrow> pelts xd2 j = pelts xd1 j) \<longrightarrow> value x3 (sint o8) = value x2 (sint o8) \<and> (value x3 (sint o8) = value x2 (sint o8) \<longrightarrow> (let o13 :: int = offset x3 + (sint sy + sint o8 - (1 :: int)); o14 :: int = offset xd2; o15 :: int = offset x3; o16 :: int \<Rightarrow> 64 word = pelts x3 in (o15 \<le> o14 \<and> o14 \<le> o13) \<and> (value_sub o16 o15 o13 = value_sub o16 o15 o14 + value_sub o16 o14 o13 * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (o14 - o15) \<longrightarrow> (c_C.min xp2 \<le> offset xp2 + (1 :: int) \<and> offset xp2 + (1 :: int) < c_C.max xp2) \<and> (c_C.min qp \<le> offset qp + -(1 :: int) \<and> offset qp + -(1 :: int) \<le> c_C.max qp) \<and> (\<forall>(o17 :: 64 word ptr). offset o17 = offset qp + -(1 :: int) \<and> plength o17 = plength qp \<and> pelts o17 = pelts qp \<and> data o17 = data qp \<and> c_C.min o17 = c_C.min qp \<and> c_C.max o17 = c_C.max qp \<and> zone1 o17 = zone1 qp \<and> writable o17 = writable qp \<longrightarrow> (let o18 :: int = offset o17 + sint sx - sint sy - sint o8; o19 :: int = offset o17 + (1 :: int); o20 :: int = offset o17; o21 :: int \<Rightarrow> 64 word = pelts q1 in (o19 \<le> o18 \<and> (o20 < o19 \<or> o18 \<le> o20)) \<and> (value_sub o21 o19 o18 = value_sub (o21(o20 := uint'64_max)) o19 o18 \<longrightarrow> ((c_C.min o17 \<le> offset o17 \<and> offset o17 < c_C.max o17) \<and> writable o17 = True) \<and> (\<forall>(qp1 :: 64 word ptr) (q2 :: 64 word ptr). data qp1 = data q2 \<and> length (data q2) = length (data o17) \<and> offset qp1 = offset o17 \<and> c_C.min qp1 = c_C.min o17 \<and> c_C.max qp1 = c_C.max o17 \<and> writable qp1 = writable o17 \<and> zone1 qp1 = zone1 o17 \<longrightarrow> data qp1 = data q2 \<and> length (data q2) = length (data o17) \<and> offset qp1 = offset o17 \<and> c_C.min qp1 = c_C.min o17 \<and> c_C.max qp1 = c_C.max o17 \<and> writable qp1 = writable o17 \<and> zone1 qp1 = zone1 o17 \<longrightarrow> length (data q2) = length (data q1) \<and> offset q2 = offset q1 \<and> c_C.min q2 = c_C.min q1 \<and> c_C.max q2 = c_C.max q1 \<and> writable q2 = writable q1 \<and> zone1 q2 = zone1 q1 \<longrightarrow> pelts qp1 = (pelts o17)(offset qp1 := uint'64_max) \<longrightarrow> sint o8 < sint i \<and> ((0 :: int) \<le> sint o8 \<and> sint o8 \<le> sint sx - sint sy) \<and> offset qp1 = offset q2 + sint o8 \<and> offset xp2 = offset x3 + sint sy + sint o8 - (2 :: int) \<and> plength qp1 = plength q2 \<and> c_C.min qp1 = c_C.min q2 \<and> c_C.max qp1 = c_C.max q2 \<and> plength xp2 = plength x3 \<and> c_C.min xp2 = c_C.min x3 \<and> c_C.max xp2 = c_C.max x3 \<and> pelts qp1 = pelts q2 \<and> pelts xp2 = pelts x3 \<and> (writable qp1 = True \<and> writable xp2 = True) \<and> value x (sint sx) = (value qp1 (sint sx - sint sy - sint o8) + uint qh * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy - sint o8)) * vy * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o8 + value x3 (sint sy + sint o8 - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy + sint o8 - (1 :: int)) * uint (pelts xp2 (offset xp2 + (1 :: int))) \<and> value_sub (pelts x3) (offset xp2 + sint mdn) (offset xp2 + sint mdn + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint (pelts xp2 (offset xp2 + (1 :: int))) < vy \<and> uint (pelts x3 (offset xp2)) + ((18446744073709551615 :: int) + (1 :: int)) * uint (pelts xp2 (offset xp2 + (1 :: int))) \<le> uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh))))))))))) else let vlx :: int = value xd1 (sint sy - (2 :: int)) in (c_C.min o9 \<le> offset o9 \<and> offset o9 < c_C.max o9) \<and> (let xp0 :: 64 word = pelts o9 (offset o9) in (c_C.min o9 \<le> offset o9 + (1 :: int) \<and> offset o9 + (1 :: int) < c_C.max o9) \<and> (let xp11 :: 64 word = pelts o9 (offset o9 + (1 :: int)) in value xd1 (sint sy) = vlx + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (2 :: int)) * (uint xp0 + ((18446744073709551615 :: int) + (1 :: int)) * uint xp11) \<and> (value xd1 (sint sy) = vlx + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (2 :: int)) * (uint xp0 + ((18446744073709551615 :: int) + (1 :: int)) * uint xp11) \<longrightarrow> (((18446744073709551615 :: int) + (1 :: int)) ediv (2 :: int) \<le> uint dh \<and> reciprocal_3by2 v dh dl \<and> uint xp11 + ((18446744073709551615 :: int) + (1 :: int)) * uint x11 < uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh) \<and> (\<forall>(qu :: 64 word) (rl :: 64 word) (rh :: 64 word). uint qu * uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint qu * uint dh + uint rl + ((18446744073709551615 :: int) + (1 :: int)) * uint rh = uint xp0 + ((18446744073709551615 :: int) + (1 :: int)) * uint xp11 + ((18446744073709551615 :: int) + (1 :: int)) * ((18446744073709551615 :: int) + (1 :: int)) * uint x11 \<and> (0 :: int) \<le> uint rl + ((18446744073709551615 :: int) + (1 :: int)) * uint rh \<and> uint rl + ((18446744073709551615 :: int) + (1 :: int)) * uint rh < uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh \<longrightarrow> (let o12 :: int = offset x2 + sint sy + sint i - (1 :: int); o13 :: int = offset xd1; o14 :: int = offset x2; o15 :: int \<Rightarrow> 64 word = pelts x2 in (o14 \<le> o13 \<and> o13 \<le> o12) \<and> (value_sub o15 o14 o12 = value_sub o15 o14 o13 + value_sub o15 o13 o12 * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (o13 - o14) \<longrightarrow> (let o16 :: 64 word list = data x2 in \<forall>(xc :: 64 word list). length xc = length o16 \<and> (\<forall>(i1 :: int). (0 :: int) \<le> i1 \<and> i1 < int (length xc) \<longrightarrow> xc ! nat i1 = o16 ! nat i1) \<longrightarrow> int'32_in_bounds (sint sy - (2 :: int)) \<and> (\<forall>(o17 :: 32 word). sint o17 = sint sy - (2 :: int) \<longrightarrow> (valid y (sint o17) \<and> valid xd1 (sint o17) \<and> writable xd1 = True) \<and> (\<forall>(xd2 :: 64 word ptr) (xp2 :: 64 word ptr) (x3 :: 64 word ptr). data xd2 = data x3 \<and> length (data x3) = length (data xd1) \<and> offset xd2 = offset xd1 \<and> c_C.min xd2 = c_C.min xd1 \<and> c_C.max xd2 = c_C.max xd1 \<and> writable xd2 = writable xd1 \<and> zone1 xd2 = zone1 xd1 \<longrightarrow> data xp2 = data x3 \<and> length (data x3) = length (data o9) \<and> offset xp2 = offset o9 \<and> c_C.min xp2 = c_C.min o9 \<and> c_C.max xp2 = c_C.max o9 \<and> writable xp2 = writable o9 \<and> zone1 xp2 = zone1 o9 \<longrightarrow> length (data x3) = length (data x2) \<and> offset x3 = offset x2 \<and> c_C.min x3 = c_C.min x2 \<and> c_C.max x3 = c_C.max x2 \<and> writable x3 = writable x2 \<and> zone1 x3 = zone1 x2 \<longrightarrow> (\<forall>(cy :: 64 word). value xd2 (sint o17) - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o17 * uint cy = value xd1 (sint o17) - value y (sint o17) * uint qu \<and> (\<forall>(j :: int). j < offset xd2 \<or> offset xd2 + sint o17 \<le> j \<longrightarrow> pelts xd2 j = pelts xd1 j) \<longrightarrow> value x3 (sint o8) = value x2 (sint o8) \<and> (value x3 (sint o8) = value x2 (sint o8) \<longrightarrow> (\<forall>(cy1 :: 64 word). (if uint rl < uint cy then cy1 = (1 :: 64 word) else cy1 = (0 :: 64 word)) \<longrightarrow> (\<forall>(o18 :: 64 word). uint o18 = (uint rl - uint cy) emod ((18446744073709551615 :: int) + (1 :: int)) \<longrightarrow> (\<forall>(cy2 :: 64 word). (if uint rh < uint cy1 then cy2 = (1 :: 64 word) else cy2 = (0 :: 64 word)) \<longrightarrow> (\<forall>(o19 :: 64 word). uint o19 = (uint rh - uint cy1) emod ((18446744073709551615 :: int) + (1 :: int)) \<longrightarrow> (let o20 :: int = offset xd2 + sint sy - (1 :: int); o21 :: int = offset xd2; o22 :: int = offset xp2; o23 :: int \<Rightarrow> 64 word = pelts x3 in (o21 \<le> o22 \<and> o22 < o20) \<and> (value_sub (o23(o22 := o18)) o21 o20 = value_sub o23 o21 o20 + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (o22 - o21) * (uint o18 - uint (o23 o22)) \<longrightarrow> (let o24 :: int = offset x3 + sint o8; o25 :: int = offset x3; o26 :: int = offset xp2; o27 :: int \<Rightarrow> 64 word = pelts x3 in (o25 \<le> o24 \<and> (o26 < o25 \<or> o24 \<le> o26)) \<and> (value_sub o27 o25 o24 = value_sub (o27(o26 := o18)) o25 o24 \<longrightarrow> (let o28 :: int = offset xd2 + sint sy - (2 :: int); o29 :: int = offset xd2; o30 :: int = offset xp2; o31 :: int \<Rightarrow> 64 word = pelts x3 in (o29 \<le> o28 \<and> (o30 < o29 \<or> o28 \<le> o30)) \<and> (value_sub o31 o29 o28 = value_sub (o31(o30 := o18)) o29 o28 \<longrightarrow> ((c_C.min xp2 \<le> offset xp2 \<and> offset xp2 < c_C.max xp2) \<and> writable xp2 = True) \<and> (\<forall>(xd3 :: 64 word ptr) (xp3 :: 64 word ptr) (x4 :: 64 word ptr). data xp3 = data x4 \<and> length (data x4) = length (data xp2) \<and> offset xp3 = offset xp2 \<and> c_C.min xp3 = c_C.min xp2 \<and> c_C.max xp3 = c_C.max xp2 \<and> writable xp3 = writable xp2 \<and> zone1 xp3 = zone1 xp2 \<longrightarrow> data xd3 = data x4 \<and> length (data x4) = length (data xd2) \<and> offset xd3 = offset xd2 \<and> c_C.min xd3 = c_C.min xd2 \<and> c_C.max xd3 = c_C.max xd2 \<and> writable xd3 = writable xd2 \<and> zone1 xd3 = zone1 xd2 \<longrightarrow> data xp3 = data x4 \<and> length (data x4) = length (data xp2) \<and> offset xp3 = offset xp2 \<and> c_C.min xp3 = c_C.min xp2 \<and> c_C.max xp3 = c_C.max xp2 \<and> writable xp3 = writable xp2 \<and> zone1 xp3 = zone1 xp2 \<longrightarrow> length (data x4) = length (data x3) \<and> offset x4 = offset x3 \<and> c_C.min x4 = c_C.min x3 \<and> c_C.max x4 = c_C.max x3 \<and> writable x4 = writable x3 \<and> zone1 x4 = zone1 x3 \<longrightarrow> pelts xp3 = (pelts xp2)(offset xp3 := o18) \<longrightarrow> value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint cy2 = value xd1 (sint sy) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint x11 - uint qu * vy \<and> (value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint cy2 = value xd1 (sint sy) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy * uint x11 - uint qu * vy \<longrightarrow> (\<forall>(o32 :: bool). (uint cy2 = uint (0 :: 64 word) \<longrightarrow> o32 = True) \<and> (o32 = True \<longrightarrow> cy2 = (0 :: 64 word)) \<longrightarrow> (if \<not>o32 = True then (0 :: int) < uint qu \<and> ((0 :: int) < uint qu \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy - vy \<le> value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 \<and> (((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy - vy \<le> value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 \<longrightarrow> (let o33 :: 64 word list = data x4 in \<forall>(xc1 :: 64 word list). length xc1 = length o33 \<and> (\<forall>(i1 :: int). (0 :: int) \<le> i1 \<and> i1 < int (length xc1) \<longrightarrow> xc1 ! nat i1 = o33 ! nat i1) \<longrightarrow> int'32_in_bounds (sint sy - (1 :: int)) \<and> (\<forall>(o34 :: 32 word). sint o34 = sint sy - (1 :: int) \<longrightarrow> (valid xd3 (sint o34) \<and> valid y (sint o34) \<and> writable xd3 = True) \<and> (\<forall>(xd4 :: 64 word ptr) (xp4 :: 64 word ptr) (x5 :: 64 word ptr). data xd4 = data x5 \<and> length (data x5) = length (data xd3) \<and> offset xd4 = offset xd3 \<and> c_C.min xd4 = c_C.min xd3 \<and> c_C.max xd4 = c_C.max xd3 \<and> writable xd4 = writable xd3 \<and> zone1 xd4 = zone1 xd3 \<longrightarrow> data xp4 = data x5 \<and> length (data x5) = length (data xp3) \<and> offset xp4 = offset xp3 \<and> c_C.min xp4 = c_C.min xp3 \<and> c_C.max xp4 = c_C.max xp3 \<and> writable xp4 = writable xp3 \<and> zone1 xp4 = zone1 xp3 \<longrightarrow> length (data x5) = length (data x4) \<and> offset x5 = offset x4 \<and> c_C.min x5 = c_C.min x4 \<and> c_C.max x5 = c_C.max x4 \<and> writable x5 = writable x4 \<and> zone1 x5 = zone1 x4 \<longrightarrow> (\<forall>(c :: 64 word). ((0 :: int) \<le> uint c \<and> uint c \<le> (1 :: int)) \<and> value xd4 (sint o34) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o34 * uint c = value xd3 (sint o34) + value y (sint o34) \<and> (\<forall>(j :: int). j < offset xd4 \<or> offset xd4 + sint o34 \<le> j \<longrightarrow> pelts xd4 j = pelts xd3 j) \<longrightarrow> value x5 (sint o8) = value x4 (sint o8) \<and> (value x5 (sint o8) = value x4 (sint o8) \<longrightarrow> (\<not>(18446744073709551615 :: int) + (1 :: int) = (0 :: int) \<and> (\<forall>(o35 :: 64 word). uint o35 = (uint dh + uint c) emod ((18446744073709551615 :: int) + (1 :: int)) \<longrightarrow> (\<forall>(o36 :: 64 word). uint o36 = (uint o19 + uint o35) emod ((18446744073709551615 :: int) + (1 :: int)) \<longrightarrow> value xd4 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o36 = value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 + vy - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy))) \<and> (\<forall>(x12 :: 64 word). value xd4 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint x12 = value xd3 (sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 + vy - ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint sy \<longrightarrow> uint'64_in_bounds (uint qu - (1 :: int)) \<and> (\<forall>(o35 :: 64 word). uint o35 = uint qu - (1 :: int) \<longrightarrow> (c_C.min qp \<le> offset qp + -(1 :: int) \<and> offset qp + -(1 :: int) \<le> c_C.max qp) \<and> (\<forall>(o36 :: 64 word ptr). offset o36 = offset qp + -(1 :: int) \<and> plength o36 = plength qp \<and> pelts o36 = pelts qp \<and> data o36 = data qp \<and> c_C.min o36 = c_C.min qp \<and> c_C.max o36 = c_C.max qp \<and> zone1 o36 = zone1 qp \<and> writable o36 = writable qp \<longrightarrow> (let o37 :: int = offset o36 + sint sx - sint sy - sint o8; o38 :: int = offset o36 + (1 :: int); o39 :: int = offset o36; o40 :: int \<Rightarrow> 64 word = pelts q1 in (o38 \<le> o37 \<and> (o39 < o38 \<or> o37 \<le> o39)) \<and> (value_sub o40 o38 o37 = value_sub (o40(o39 := o35)) o38 o37 \<longrightarrow> ((c_C.min o36 \<le> offset o36 \<and> offset o36 < c_C.max o36) \<and> writable o36 = True) \<and> (\<forall>(qp1 :: 64 word ptr) (q2 :: 64 word ptr). data qp1 = data q2 \<and> length (data q2) = length (data o36) \<and> offset qp1 = offset o36 \<and> c_C.min qp1 = c_C.min o36 \<and> c_C.max qp1 = c_C.max o36 \<and> writable qp1 = writable o36 \<and> zone1 qp1 = zone1 o36 \<longrightarrow> data qp1 = data q2 \<and> length (data q2) = length (data o36) \<and> offset qp1 = offset o36 \<and> c_C.min qp1 = c_C.min o36 \<and> c_C.max qp1 = c_C.max o36 \<and> writable qp1 = writable o36 \<and> zone1 qp1 = zone1 o36 \<longrightarrow> length (data q2) = length (data q1) \<and> offset q2 = offset q1 \<and> c_C.min q2 = c_C.min q1 \<and> c_C.max q2 = c_C.max q1 \<and> writable q2 = writable q1 \<and> zone1 q2 = zone1 q1 \<longrightarrow> pelts qp1 = (pelts o36)(offset qp1 := o35) \<longrightarrow> sint o8 < sint i \<and> ((0 :: int) \<le> sint o8 \<and> sint o8 \<le> sint sx - sint sy) \<and> offset qp1 = offset q2 + sint o8 \<and> offset xp4 = offset x5 + sint sy + sint o8 - (2 :: int) \<and> plength qp1 = plength q2 \<and> c_C.min qp1 = c_C.min q2 \<and> c_C.max qp1 = c_C.max q2 \<and> plength xp4 = plength x5 \<and> c_C.min xp4 = c_C.min x5 \<and> c_C.max xp4 = c_C.max x5 \<and> pelts qp1 = pelts q2 \<and> pelts xp4 = pelts x5 \<and> (writable qp1 = True \<and> writable xp4 = True) \<and> value x (sint sx) = (value qp1 (sint sx - sint sy - sint o8) + uint qh * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy - sint o8)) * vy * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o8 + value x5 (sint sy + sint o8 - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy + sint o8 - (1 :: int)) * uint x12 \<and> value_sub (pelts x5) (offset xp4 + sint mdn) (offset xp4 + sint mdn + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint x12 < vy \<and> uint (pelts x5 (offset xp4)) + ((18446744073709551615 :: int) + (1 :: int)) * uint x12 \<le> uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh))))))))))))) else (c_C.min qp \<le> offset qp + -(1 :: int) \<and> offset qp + -(1 :: int) \<le> c_C.max qp) \<and> (\<forall>(o33 :: 64 word ptr). offset o33 = offset qp + -(1 :: int) \<and> plength o33 = plength qp \<and> pelts o33 = pelts qp \<and> data o33 = data qp \<and> c_C.min o33 = c_C.min qp \<and> c_C.max o33 = c_C.max qp \<and> zone1 o33 = zone1 qp \<and> writable o33 = writable qp \<longrightarrow> (let o34 :: int = offset o33 + sint sx - sint sy - sint o8; o35 :: int = offset o33 + (1 :: int); o36 :: int = offset o33; o37 :: int \<Rightarrow> 64 word = pelts q1 in (o35 \<le> o34 \<and> (o36 < o35 \<or> o34 \<le> o36)) \<and> (value_sub o37 o35 o34 = value_sub (o37(o36 := qu)) o35 o34 \<longrightarrow> ((c_C.min o33 \<le> offset o33 \<and> offset o33 < c_C.max o33) \<and> writable o33 = True) \<and> (\<forall>(qp1 :: 64 word ptr) (q2 :: 64 word ptr). data qp1 = data q2 \<and> length (data q2) = length (data o33) \<and> offset qp1 = offset o33 \<and> c_C.min qp1 = c_C.min o33 \<and> c_C.max qp1 = c_C.max o33 \<and> writable qp1 = writable o33 \<and> zone1 qp1 = zone1 o33 \<longrightarrow> data qp1 = data q2 \<and> length (data q2) = length (data o33) \<and> offset qp1 = offset o33 \<and> c_C.min qp1 = c_C.min o33 \<and> c_C.max qp1 = c_C.max o33 \<and> writable qp1 = writable o33 \<and> zone1 qp1 = zone1 o33 \<longrightarrow> length (data q2) = length (data q1) \<and> offset q2 = offset q1 \<and> c_C.min q2 = c_C.min q1 \<and> c_C.max q2 = c_C.max q1 \<and> writable q2 = writable q1 \<and> zone1 q2 = zone1 q1 \<longrightarrow> pelts qp1 = (pelts o33)(offset qp1 := qu) \<longrightarrow> sint o8 < sint i \<and> ((0 :: int) \<le> sint o8 \<and> sint o8 \<le> sint sx - sint sy) \<and> offset qp1 = offset q2 + sint o8 \<and> offset xp3 = offset x4 + sint sy + sint o8 - (2 :: int) \<and> plength qp1 = plength q2 \<and> c_C.min qp1 = c_C.min q2 \<and> c_C.max qp1 = c_C.max q2 \<and> plength xp3 = plength x4 \<and> c_C.min xp3 = c_C.min x4 \<and> c_C.max xp3 = c_C.max x4 \<and> pelts qp1 = pelts q2 \<and> pelts xp3 = pelts x4 \<and> (writable qp1 = True \<and> writable xp3 = True) \<and> value x (sint sx) = (value qp1 (sint sx - sint sy - sint o8) + uint qh * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy - sint o8)) * vy * ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint o8 + value x4 (sint sy + sint o8 - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy + sint o8 - (1 :: int)) * uint o19 \<and> value_sub (pelts x4) (offset xp3 + sint mdn) (offset xp3 + sint mdn + sint sy - (1 :: int)) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sy - (1 :: int)) * uint o19 < vy \<and> uint (pelts x4 (offset xp3)) + ((18446744073709551615 :: int) + (1 :: int)) * uint o19 \<le> uint dl + ((18446744073709551615 :: int) + (1 :: int)) * uint dh))))))))))))))))))))))))))))))))))) else let o8 :: int = offset xp1; o9 :: int = offset x2; o10 :: int = offset xp1 + (1 :: int); o11 :: int \<Rightarrow> 64 word = pelts x2 in (o9 \<le> o8 \<and> (o10 < o9 \<or> o8 \<le> o10)) \<and> (value_sub o11 o9 o8 = value_sub (o11(o10 := x11)) o9 o8 \<longrightarrow> ((c_C.min xp1 \<le> offset xp1 + (1 :: int) \<and> offset xp1 + (1 :: int) < c_C.max xp1) \<and> writable xp1 = True) \<and> (\<forall>(o12 :: 64 word ptr) (x3 :: 64 word ptr). data o12 = data x3 \<and> length (data x3) = length (data xp1) \<and> offset o12 = offset xp1 \<and> c_C.min o12 = c_C.min xp1 \<and> c_C.max o12 = c_C.max xp1 \<and> writable o12 = writable xp1 \<and> zone1 o12 = zone1 xp1 \<longrightarrow> length (data x3) = length (data x2) \<and> offset x3 = offset x2 \<and> c_C.min x3 = c_C.min x2 \<and> c_C.max x3 = c_C.max x2 \<and> writable x3 = writable x2 \<and> zone1 x3 = zone1 x2 \<longrightarrow> pelts o12 = (pelts xp1)(offset o12 + (1 :: int) := x11) \<and> pelts o12 (offset o12 + (1 :: int)) = x11 \<longrightarrow> value x (sint sx) = (value q1 (sint sx - sint sy) + ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (sint sx - sint sy) * uint qh) * value y (sint sy) + value x3 (sint sy) \<and> value x3 (sint sy) < value y (sint sy) \<and> (0 :: int) \<le> uint qh \<and> uint qh \<le> (1 :: int))))))))))))))))))))"
  sorry
end
