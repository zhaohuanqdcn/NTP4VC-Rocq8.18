theory hillel_challenge_Fulcrum_fulcrumqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.int_Sum"
begin
definition diff :: "int list \<Rightarrow> int \<Rightarrow> int"
  where "diff a i = abs (sum_list (drop (0 :: nat) (take (nat i - (0 :: nat)) a)) - sum_list (drop (nat i) (take (length a - nat i) a)))" for a i
theorem fulcrum'vc:
  fixes a :: "int list"
  shows "let n :: int = int (length a); o1 :: int = n - (1 :: int) in ((0 :: int) \<le> o1 + (1 :: int) \<longrightarrow> (0 :: int) = sum_list (drop (0 :: nat) (take ((0 :: nat) - (0 :: nat)) a)) \<and> (\<forall>(right1 :: int). (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o1) \<and> right1 = sum_list (drop (0 :: nat) (take (nat i - (0 :: nat)) a)) \<longrightarrow> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> right1 + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a))) \<and> (right1 = sum_list (drop (0 :: nat) (take (nat (o1 + (1 :: int)) - (0 :: nat)) a)) \<longrightarrow> (let o2 :: int = abs right1; o3 :: int = n - (1 :: int) in ((0 :: int) \<le> o3 + (1 :: int) \<longrightarrow> ((0 :: int) = sum_list (drop (0 :: nat) (take ((0 :: nat) - (0 :: nat)) a)) \<and> right1 = sum_list (drop (0 :: nat) (take (nat n - (0 :: nat)) a)) \<and> (0 :: int) \<le> (0 :: int) \<and> o2 = diff a (0 :: int) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> (0 :: int) \<longrightarrow> o2 \<le> diff a j)) \<and> (\<forall>(bestd :: int) (besti :: int) (left1 :: int) (right2 :: int). (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o3) \<and> left1 = sum_list (drop (0 :: nat) (take (nat i - (0 :: nat)) a)) \<and> right2 = sum_list (drop (nat i) (take (nat n - nat i) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> i) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i \<longrightarrow> bestd \<le> diff a j) \<longrightarrow> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> (let d :: int = abs (left1 + a ! nat i - (right2 - a ! nat i)) in if d < bestd then left1 + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> right2 - a ! nat i = sum_list (drop (nat (i + (1 :: int))) (take (nat n - nat (i + (1 :: int))) a)) \<and> ((0 :: int) \<le> i + (1 :: int) \<and> i + (1 :: int) \<le> i + (1 :: int)) \<and> d = diff a (i + (1 :: int)) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i + (1 :: int) \<longrightarrow> d \<le> diff a j) else left1 + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> right2 - a ! nat i = sum_list (drop (nat (i + (1 :: int))) (take (nat n - nat (i + (1 :: int))) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> i + (1 :: int)) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i + (1 :: int) \<longrightarrow> bestd \<le> diff a j))) \<and> (left1 = sum_list (drop (0 :: nat) (take (nat (o3 + (1 :: int)) - (0 :: nat)) a)) \<and> right2 = sum_list (drop (nat (o3 + (1 :: int))) (take (nat n - nat (o3 + (1 :: int))) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> o3 + (1 :: int)) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> o3 + (1 :: int) \<longrightarrow> bestd \<le> diff a j) \<longrightarrow> ((0 :: int) \<le> besti \<and> besti \<le> int (length a)) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i \<le> int (length a) \<longrightarrow> diff a besti \<le> diff a i)))) \<and> (o3 + (1 :: int) < (0 :: int) \<longrightarrow> ((0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> int (length a)) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i \<le> int (length a) \<longrightarrow> diff a (0 :: int) \<le> diff a i)))))) \<and> (o1 + (1 :: int) < (0 :: int) \<longrightarrow> (let o2 :: int = abs (0 :: int); o3 :: int = n - (1 :: int) in ((0 :: int) \<le> o3 + (1 :: int) \<longrightarrow> ((0 :: int) = sum_list (drop (0 :: nat) (take ((0 :: nat) - (0 :: nat)) a)) \<and> (0 :: int) = sum_list (drop (0 :: nat) (take (nat n - (0 :: nat)) a)) \<and> (0 :: int) \<le> (0 :: int) \<and> o2 = diff a (0 :: int) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> (0 :: int) \<longrightarrow> o2 \<le> diff a j)) \<and> (\<forall>(bestd :: int) (besti :: int) (left1 :: int) (right1 :: int). (\<forall>(i :: int). ((0 :: int) \<le> i \<and> i \<le> o3) \<and> left1 = sum_list (drop (0 :: nat) (take (nat i - (0 :: nat)) a)) \<and> right1 = sum_list (drop (nat i) (take (nat n - nat i) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> i) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i \<longrightarrow> bestd \<le> diff a j) \<longrightarrow> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> ((0 :: int) \<le> i \<and> i < int (length a)) \<and> (let d :: int = abs (left1 + a ! nat i - (right1 - a ! nat i)) in if d < bestd then left1 + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> right1 - a ! nat i = sum_list (drop (nat (i + (1 :: int))) (take (nat n - nat (i + (1 :: int))) a)) \<and> ((0 :: int) \<le> i + (1 :: int) \<and> i + (1 :: int) \<le> i + (1 :: int)) \<and> d = diff a (i + (1 :: int)) \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i + (1 :: int) \<longrightarrow> d \<le> diff a j) else left1 + a ! nat i = sum_list (drop (0 :: nat) (take (nat (i + (1 :: int)) - (0 :: nat)) a)) \<and> right1 - a ! nat i = sum_list (drop (nat (i + (1 :: int))) (take (nat n - nat (i + (1 :: int))) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> i + (1 :: int)) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> i + (1 :: int) \<longrightarrow> bestd \<le> diff a j))) \<and> (left1 = sum_list (drop (0 :: nat) (take (nat (o3 + (1 :: int)) - (0 :: nat)) a)) \<and> right1 = sum_list (drop (nat (o3 + (1 :: int))) (take (nat n - nat (o3 + (1 :: int))) a)) \<and> ((0 :: int) \<le> besti \<and> besti \<le> o3 + (1 :: int)) \<and> bestd = diff a besti \<and> (\<forall>(j :: int). (0 :: int) \<le> j \<and> j \<le> o3 + (1 :: int) \<longrightarrow> bestd \<le> diff a j) \<longrightarrow> ((0 :: int) \<le> besti \<and> besti \<le> int (length a)) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i \<le> int (length a) \<longrightarrow> diff a besti \<le> diff a i)))) \<and> (o3 + (1 :: int) < (0 :: int) \<longrightarrow> ((0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> int (length a)) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i \<le> int (length a) \<longrightarrow> diff a (0 :: int) \<le> diff a i))))"
  sorry
end
