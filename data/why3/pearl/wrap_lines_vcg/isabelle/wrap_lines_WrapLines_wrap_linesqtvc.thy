theory wrap_lines_WrapLines_wrap_linesqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref"
begin
typedecl  char
consts space :: "char"
consts newline :: "char"
definition at_least_line_length :: "char list \<Rightarrow> int \<Rightarrow> _"
  where "at_least_line_length s line_length \<longleftrightarrow> (\<forall>(i :: int) (j :: int). -(1 :: int) \<le> i \<and> i < j \<and> j < int (length s) \<longrightarrow> i = -(1 :: int) \<or> i \<le> (0 :: int) \<and> s ! nat i = newline \<longrightarrow> s ! nat j = newline \<longrightarrow> line_length \<le> j - i)" for s line_length
theorem wrap_lines'vc:
  fixes s :: "char list"
  fixes line_length :: "int"
  assumes fact0: "\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length s) \<longrightarrow> \<not>s ! nat i = newline"
  shows "let o1 :: char = space in ((0 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> int (length s)) \<and> (\<forall>(o2 :: int). o2 = -(1 :: int) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length s) \<longrightarrow> \<not>s ! nat i = o1) \<or> ((0 :: int) \<le> o2 \<and> o2 < int (length s)) \<and> s ! nat o2 = o1 \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < o2 \<longrightarrow> \<not>s ! nat i = o1) \<longrightarrow> ((-(1 :: int) \<le> -(1 :: int) \<and> -(1 :: int) < int (length s)) \<and> (o2 = -(1 :: int) \<or> (-(1 :: int) < o2 \<and> o2 < int (length s)) \<and> s ! nat o2 = space) \<and> (\<forall>(i :: int). -(1 :: int) < i \<and> i < o2 \<longrightarrow> \<not>s ! nat i = newline) \<and> at_least_line_length s line_length) \<and> (\<forall>(last_sp :: int) (last_nl :: int) (s1 :: char list). length s1 = length s \<longrightarrow> (-(1 :: int) \<le> last_nl \<and> last_nl < int (length s1)) \<and> (last_sp = -(1 :: int) \<or> (last_nl < last_sp \<and> last_sp < int (length s1)) \<and> s1 ! nat last_sp = space) \<and> (\<forall>(i :: int). last_nl < i \<and> i < int (length s1) \<longrightarrow> s1 ! nat i = s ! nat i) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length s1) \<longrightarrow> \<not>s1 ! nat i = s ! nat i \<longrightarrow> s ! nat i = space \<and> s1 ! nat i = newline) \<and> (\<forall>(i :: int). last_nl < i \<and> i < last_sp \<longrightarrow> \<not>s1 ! nat i = newline) \<and> at_least_line_length s1 line_length \<longrightarrow> (if \<not>last_sp = -(1 :: int) then if line_length < last_sp - last_nl then let o3 :: char = newline in ((0 :: int) \<le> last_sp \<and> last_sp < int (length s1)) \<and> (length (s1[nat last_sp := o3]) = length s1 \<longrightarrow> nth (s1[nat last_sp := o3]) o nat = (nth s1 o nat)(last_sp := o3) \<longrightarrow> (let o4 :: int = last_sp + (1 :: int); o5 :: char = space in ((0 :: int) \<le> o4 \<and> o4 \<le> int (length (s1[nat last_sp := o3]))) \<and> (\<forall>(o6 :: int). o6 = -(1 :: int) \<and> (\<forall>(i :: int). o4 \<le> i \<and> i < int (length (s1[nat last_sp := o3])) \<longrightarrow> \<not>s1[nat last_sp := o3] ! nat i = o5) \<or> (o4 \<le> o6 \<and> o6 < int (length (s1[nat last_sp := o3]))) \<and> s1[nat last_sp := o3] ! nat o6 = o5 \<and> (\<forall>(i :: int). o4 \<le> i \<and> i < o6 \<longrightarrow> \<not>s1[nat last_sp := o3] ! nat i = o5) \<longrightarrow> ((0 :: int) \<le> (if last_sp = -(1 :: int) then 0 :: int else int (length s1) - last_sp) \<and> (if o6 = -(1 :: int) then 0 :: int else int (length (s1[nat last_sp := o3])) - o6) < (if last_sp = -(1 :: int) then 0 :: int else int (length s1) - last_sp)) \<and> (-(1 :: int) \<le> last_sp \<and> last_sp < int (length (s1[nat last_sp := o3]))) \<and> (o6 = -(1 :: int) \<or> (last_sp < o6 \<and> o6 < int (length (s1[nat last_sp := o3]))) \<and> s1[nat last_sp := o3] ! nat o6 = space) \<and> (\<forall>(i :: int). last_sp < i \<and> i < int (length (s1[nat last_sp := o3])) \<longrightarrow> s1[nat last_sp := o3] ! nat i = s ! nat i) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length (s1[nat last_sp := o3])) \<longrightarrow> \<not>s1[nat last_sp := o3] ! nat i = s ! nat i \<longrightarrow> s ! nat i = space \<and> s1[nat last_sp := o3] ! nat i = newline) \<and> (\<forall>(i :: int). last_sp < i \<and> i < o6 \<longrightarrow> \<not>s1[nat last_sp := o3] ! nat i = newline) \<and> at_least_line_length (s1[nat last_sp := o3]) line_length))) else let o3 :: int = last_sp + (1 :: int); o4 :: char = space in ((0 :: int) \<le> o3 \<and> o3 \<le> int (length s1)) \<and> (\<forall>(o5 :: int). o5 = -(1 :: int) \<and> (\<forall>(i :: int). o3 \<le> i \<and> i < int (length s1) \<longrightarrow> \<not>s1 ! nat i = o4) \<or> (o3 \<le> o5 \<and> o5 < int (length s1)) \<and> s1 ! nat o5 = o4 \<and> (\<forall>(i :: int). o3 \<le> i \<and> i < o5 \<longrightarrow> \<not>s1 ! nat i = o4) \<longrightarrow> ((0 :: int) \<le> (if last_sp = -(1 :: int) then 0 :: int else int (length s1) - last_sp) \<and> (if o5 = -(1 :: int) then 0 :: int else int (length s1) - o5) < (if last_sp = -(1 :: int) then 0 :: int else int (length s1) - last_sp)) \<and> (-(1 :: int) \<le> last_nl \<and> last_nl < int (length s1)) \<and> (o5 = -(1 :: int) \<or> (last_nl < o5 \<and> o5 < int (length s1)) \<and> s1 ! nat o5 = space) \<and> (\<forall>(i :: int). last_nl < i \<and> i < int (length s1) \<longrightarrow> s1 ! nat i = s ! nat i) \<and> (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length s1) \<longrightarrow> \<not>s1 ! nat i = s ! nat i \<longrightarrow> s ! nat i = space \<and> s1 ! nat i = newline) \<and> (\<forall>(i :: int). last_nl < i \<and> i < o5 \<longrightarrow> \<not>s1 ! nat i = newline) \<and> at_least_line_length s1 line_length) else (\<forall>(i :: int). (0 :: int) \<le> i \<and> i < int (length s1) \<longrightarrow> \<not>s1 ! nat i = s ! nat i \<longrightarrow> s ! nat i = space \<and> s1 ! nat i = newline) \<and> at_least_line_length s1 line_length)))"
  sorry
end
