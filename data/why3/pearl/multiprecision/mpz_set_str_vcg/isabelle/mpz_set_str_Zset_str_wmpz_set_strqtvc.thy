theory mpz_set_str_Zset_str_wmpz_set_strqtvc
  imports "NTP4Verif.NTP4Verif" "Why3STD.Ref_Ref" "Why3STD.map_Const" "Why3STD.map_MapEq" "mach.int_Unsigned" "mach.c_C" "mach.c_String" "mach.c_StrlenLemmas" "mach.c_UChar" "../../lib/isabelle/lemmas_Lemmas" "../../lib/isabelle/types_Config" "../../lib/isabelle/types_Types" "../../lib/isabelle/types_Int32Eq" "../../lib/isabelle/types_UInt64Eq" "../../lib/isabelle/util_Util" "../../lib/isabelle/ptralias_Alias" "../../lib/isabelle/util_UtilOld" "../../lib/isabelle/mpz_Z" "../../lib/isabelle/mpz_Zutil" "../../lib/isabelle/base_info_BaseInfo" "../../lib/isabelle/logical_LogicalUtil" "../../lib/isabelle/logical_Logical" "../../lib/isabelle/logical_LogicalOld" "../../lib/isabelle/stringlemmas_String_lemmas" "../../lib/isabelle/stringlemmas_Conversions" "../../lib/isabelle/stringlemmas_String_value" "../../lib/isabelle/set_str_Set_str" "../../lib/isabelle/powm_Powm" "../../lib/isabelle/compare_Compare" "../../lib/isabelle/valuation_Valuation" "../../lib/isabelle/add_Add" "../../lib/isabelle/add_AddOld" "../../lib/isabelle/sub_SubOld" "../../lib/isabelle/mul_Mul" "../../lib/isabelle/mul_Mul_basecase" "../../lib/isabelle/div_Div" "../../lib/isabelle/toom_Toom" "../../lib/isabelle/add_1_Add_1" "../../lib/isabelle/sub_1_Sub_1"
begin
theorem wmpz_set_str'vc:
  fixes sp :: "char ptr"
  fixes mpz :: "mpz_memo"
  fixes r :: "mpz_ptr"
  fixes base :: "32 word"
  assumes fact0: "valid_string sp"
  assumes fact1: "strlen (pelts sp) (offset sp) * (8 :: int) + (63 :: int) \<le> (2147483647 :: int)"
  assumes fact2: "readers mpz r = (0 :: int)"
  assumes fact3: "(1 :: int) \<le> mpz_Z.alloc mpz r"
  assumes fact4: "(2 :: int) \<le> sint base"
  assumes fact5: "sint base \<le> (62 :: int)"
  shows "c_C.min sp \<le> offset sp"
  and "offset sp < c_C.max sp"
  and "\<forall>(sign :: 32 word). (if pelts sp (offset sp) = ''-'' ! (0 :: nat) then sign = (1 :: 32 word) else sign = (0 :: 32 word)) \<longrightarrow> valid_string sp \<and> (\<forall>(slen :: 32 word). uint slen = strlen (pelts sp) (offset sp) \<longrightarrow> (c_C.min sp \<le> offset sp + sint sign \<and> offset sp + sint sign \<le> c_C.max sp) \<and> (\<forall>(o1 :: char ptr). offset o1 = offset sp + sint sign \<and> plength o1 = plength sp \<and> pelts o1 = pelts sp \<and> data o1 = data sp \<and> c_C.min o1 = c_C.min sp \<and> c_C.max o1 = c_C.max sp \<and> zone1 o1 = zone1 sp \<and> writable o1 = writable sp \<longrightarrow> (c_C.min o1 \<le> offset o1 \<and> offset o1 < c_C.max o1) \<and> (if pelts o1 (offset o1) = zero_char then (-(1 :: int) \<le> readers mpz r \<and> readers mpz r \<le> (0 :: int)) \<and> (\<forall>(mpz1 :: mpz_memo). mpz_Z.alloc mpz1 = mpz_Z.alloc mpz \<and> sgn mpz1 = sgn mpz \<and> readers mpz1 = readers mpz \<and> zones mpz1 = zones mpz \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> abs_size mpz1 r = (0 :: int) \<and> abs_value_of mpz1 r = (0 :: int) \<longrightarrow> (\<forall>(x :: mpz_ptr). \<not>x = r \<longrightarrow> mpz_unchanged x mpz1 mpz) \<and> readers mpz1 r = (0 :: int) \<and> (-(1 :: int) = (0 :: int) \<longrightarrow> value_of r mpz1 = value_text (sint base) (pelts sp) (offset sp)) \<and> (-(1 :: int) \<le> -(1 :: int) \<and> -(1 :: int) \<le> (0 :: int)) \<and> (-(1 :: int) = (0 :: int) \<longleftrightarrow> stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp))) else valid_string sp \<and> (\<forall>(o2 :: 32 word). uint o2 = strlen (pelts sp) (offset sp) \<longrightarrow> (0 :: int) \<le> uint o2 \<and> (\<forall>(dp :: 8 word ptr). plength dp = uint o2 \<and> offset dp = (0 :: int) \<and> c_C.min dp = (0 :: int) \<and> c_C.max dp = uint o2 \<and> writable dp = True \<longrightarrow> (offset o1 = offset sp + sint sign + (0 :: int) \<and> (offset sp + sint sign \<le> offset o1 \<and> offset o1 \<le> offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min sp \<le> offset o1 \<and> offset o1 \<le> c_C.max sp) \<and> abs_value_sub_text (sint base) (pelts sp) (offset sp + sint sign) (offset o1) = svalue_sub (sint base) (pelts dp) (0 :: int) (0 :: int) \<and> in_base (sint base) (pelts dp) (0 :: int) (0 :: int) \<and> (\<not>of_char (pelts o1 (offset o1)) = (0 :: int) \<longleftrightarrow> offset o1 < offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min o1 = c_C.min sp \<and> c_C.max o1 = c_C.max sp) \<and> plength o1 = plength sp \<and> pelts o1 = pelts sp \<and> text_in_base (sint base) (pelts sp) (offset sp + sint sign) (offset o1)) \<and> (\<forall>(dn :: 32 word) (dp1 :: 8 word ptr) (spi :: char ptr). length (data dp1) = length (data dp) \<and> offset dp1 = offset dp \<and> c_C.min dp1 = c_C.min dp \<and> c_C.max dp1 = c_C.max dp \<and> writable dp1 = writable dp \<and> zone1 dp1 = zone1 dp \<longrightarrow> offset spi = offset sp + sint sign + sint dn \<and> (offset sp + sint sign \<le> offset spi \<and> offset spi \<le> offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min sp \<le> offset spi \<and> offset spi \<le> c_C.max sp) \<and> abs_value_sub_text (sint base) (pelts sp) (offset sp + sint sign) (offset spi) = svalue_sub (sint base) (pelts dp1) (0 :: int) (sint dn) \<and> in_base (sint base) (pelts dp1) (0 :: int) (sint dn) \<and> (\<not>of_char (pelts spi (offset spi)) = (0 :: int) \<longleftrightarrow> offset spi < offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min spi = c_C.min sp \<and> c_C.max spi = c_C.max sp) \<and> plength spi = plength sp \<and> pelts spi = pelts sp \<and> text_in_base (sint base) (pelts sp) (offset sp + sint sign) (offset spi) \<longrightarrow> (c_C.min spi \<le> offset spi \<and> offset spi < c_C.max spi) \<and> (if \<not>pelts spi (offset spi) = zero_char then (c_C.min spi \<le> offset spi \<and> offset spi < c_C.max spi) \<and> (let c :: char = pelts spi (offset spi) in (if (36 :: int) < sint base then \<forall>(o3 :: 32 word). sint o3 = of_char c \<longrightarrow> (\<forall>(o4 :: 32 word). sint o4 = of_char (''0'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o5 :: bool). (if sint o4 \<le> sint o3 then \<exists>(o6 :: 32 word). sint o6 = of_char (''9'' ! (0 :: nat)) \<and> (\<exists>(o7 :: 32 word). sint o7 = of_char c \<and> o5 = (if sint o7 \<le> sint o6 then True else False)) else o5 = False) \<longrightarrow> (if o5 = True then \<forall>(o6 :: 32 word). sint o6 = of_char (''0'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o7 :: 32 word). sint o7 = of_char c \<longrightarrow> int'32_in_bounds (sint o7 - sint o6) \<and> (\<forall>(o8 :: 32 word). sint o8 = sint o7 - sint o6 \<longrightarrow> ((0 :: int) \<le> sint o8 \<and> sint o8 \<le> (255 :: int)) \<and> (\<forall>(o9 :: 8 word). uint o9 = sint o8 \<longrightarrow> ((0 :: int) \<le> uint o9 \<and> uint o9 < sint base \<longrightarrow> uint o9 = text_to_num (sint base) c) \<and> (sint base \<le> uint o9 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o9))) else \<forall>(o6 :: 32 word). sint o6 = of_char c \<longrightarrow> (\<forall>(o7 :: 32 word). sint o7 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o8 :: bool). (if sint o7 \<le> sint o6 then \<exists>(o9 :: 32 word). sint o9 = of_char (''z'' ! (0 :: nat)) \<and> (\<exists>(o10 :: 32 word). sint o10 = of_char c \<and> o8 = (if sint o10 \<le> sint o9 then True else False)) else o8 = False) \<longrightarrow> (if o8 = True then \<forall>(o9 :: 32 word). sint o9 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o10 :: 32 word). sint o10 = of_char c \<longrightarrow> int'32_in_bounds (sint o10 - sint o9) \<and> (\<forall>(o11 :: 32 word). sint o11 = sint o10 - sint o9 \<longrightarrow> int'32_in_bounds (sint o11 + (36 :: int)) \<and> (\<forall>(d :: 32 word). sint d = sint o11 + (36 :: int) \<longrightarrow> (\<forall>(o12 :: 32 word). sint o12 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o13 :: 32 word). sint o13 = of_char c \<longrightarrow> int'32_in_bounds (sint o13 - sint o12) \<and> (\<forall>(o14 :: 32 word). sint o14 = sint o13 - sint o12 \<longrightarrow> int'32_in_bounds (sint o14 + (36 :: int)) \<and> (\<forall>(o15 :: 32 word). sint o15 = sint o14 + (36 :: int) \<longrightarrow> ((0 :: int) \<le> sint o15 \<and> sint o15 \<le> (255 :: int)) \<and> (\<forall>(o16 :: 8 word). uint o16 = sint o15 \<longrightarrow> ((0 :: int) \<le> uint o16 \<and> uint o16 < sint base \<longrightarrow> uint o16 = text_to_num (sint base) c) \<and> (sint base \<le> uint o16 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o16)))))))) else \<forall>(o9 :: 32 word). sint o9 = of_char c \<longrightarrow> (\<forall>(o10 :: 32 word). sint o10 = of_char (''A'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o11 :: bool). (if sint o10 \<le> sint o9 then \<exists>(o12 :: 32 word). sint o12 = of_char (''Z'' ! (0 :: nat)) \<and> (\<exists>(o13 :: 32 word). sint o13 = of_char c \<and> o11 = (if sint o13 \<le> sint o12 then True else False)) else o11 = False) \<longrightarrow> (if o11 = True then \<forall>(o12 :: 32 word). sint o12 = of_char (''A'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o13 :: 32 word). sint o13 = of_char c \<longrightarrow> int'32_in_bounds (sint o13 - sint o12) \<and> (\<forall>(o14 :: 32 word). sint o14 = sint o13 - sint o12 \<longrightarrow> int'32_in_bounds (sint o14 + (10 :: int)) \<and> (\<forall>(o15 :: 32 word). sint o15 = sint o14 + (10 :: int) \<longrightarrow> ((0 :: int) \<le> sint o15 \<and> sint o15 \<le> (255 :: int)) \<and> (\<forall>(o16 :: 8 word). uint o16 = sint o15 \<longrightarrow> ((0 :: int) \<le> uint o16 \<and> uint o16 < sint base \<longrightarrow> uint o16 = text_to_num (sint base) c) \<and> (sint base \<le> uint o16 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o16)))) else ((0 :: int) \<le> sint base \<and> sint base \<le> (255 :: int)) \<and> (\<forall>(o12 :: 8 word). uint o12 = sint base \<longrightarrow> ((0 :: int) \<le> uint o12 \<and> uint o12 < sint base \<longrightarrow> uint o12 = text_to_num (sint base) c) \<and> (sint base \<le> uint o12 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o12)))))))))) else \<forall>(o3 :: 32 word). sint o3 = of_char c \<longrightarrow> (\<forall>(o4 :: 32 word). sint o4 = of_char (''0'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o5 :: bool). (if sint o4 \<le> sint o3 then \<exists>(o6 :: 32 word). sint o6 = of_char (''9'' ! (0 :: nat)) \<and> (\<exists>(o7 :: 32 word). sint o7 = of_char c \<and> o5 = (if sint o7 \<le> sint o6 then True else False)) else o5 = False) \<longrightarrow> (if o5 = True then \<forall>(o6 :: 32 word). sint o6 = of_char (''0'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o7 :: 32 word). sint o7 = of_char c \<longrightarrow> int'32_in_bounds (sint o7 - sint o6) \<and> (\<forall>(o8 :: 32 word). sint o8 = sint o7 - sint o6 \<longrightarrow> ((0 :: int) \<le> sint o8 \<and> sint o8 \<le> (255 :: int)) \<and> (\<forall>(o9 :: 8 word). uint o9 = sint o8 \<longrightarrow> ((0 :: int) \<le> uint o9 \<and> uint o9 < sint base \<longrightarrow> uint o9 = text_to_num (sint base) c) \<and> (sint base \<le> uint o9 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o9))) else \<forall>(o6 :: 32 word). sint o6 = of_char c \<longrightarrow> (\<forall>(o7 :: 32 word). sint o7 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o8 :: bool). (if sint o7 \<le> sint o6 then \<exists>(o9 :: 32 word). sint o9 = of_char (''z'' ! (0 :: nat)) \<and> (\<exists>(o10 :: 32 word). sint o10 = of_char c \<and> o8 = (if sint o10 \<le> sint o9 then True else False)) else o8 = False) \<longrightarrow> (if o8 = True then \<forall>(o9 :: 32 word). sint o9 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o10 :: 32 word). sint o10 = of_char c \<longrightarrow> int'32_in_bounds (sint o10 - sint o9) \<and> (\<forall>(o11 :: 32 word). sint o11 = sint o10 - sint o9 \<longrightarrow> int'32_in_bounds (sint o11 + (10 :: int)) \<and> (\<forall>(d :: 32 word). sint d = sint o11 + (10 :: int) \<longrightarrow> (\<forall>(o12 :: 32 word). sint o12 = of_char (''a'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o13 :: 32 word). sint o13 = of_char c \<longrightarrow> int'32_in_bounds (sint o13 - sint o12) \<and> (\<forall>(o14 :: 32 word). sint o14 = sint o13 - sint o12 \<longrightarrow> int'32_in_bounds (sint o14 + (10 :: int)) \<and> (\<forall>(o15 :: 32 word). sint o15 = sint o14 + (10 :: int) \<longrightarrow> ((0 :: int) \<le> sint o15 \<and> sint o15 \<le> (255 :: int)) \<and> (\<forall>(o16 :: 8 word). uint o16 = sint o15 \<longrightarrow> ((0 :: int) \<le> uint o16 \<and> uint o16 < sint base \<longrightarrow> uint o16 = text_to_num (sint base) c) \<and> (sint base \<le> uint o16 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o16)))))))) else \<forall>(o9 :: 32 word). sint o9 = of_char c \<longrightarrow> (\<forall>(o10 :: 32 word). sint o10 = of_char (''A'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o11 :: bool). (if sint o10 \<le> sint o9 then \<exists>(o12 :: 32 word). sint o12 = of_char (''Z'' ! (0 :: nat)) \<and> (\<exists>(o13 :: 32 word). sint o13 = of_char c \<and> o11 = (if sint o13 \<le> sint o12 then True else False)) else o11 = False) \<longrightarrow> (if o11 = True then \<forall>(o12 :: 32 word). sint o12 = of_char (''A'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o13 :: 32 word). sint o13 = of_char c \<longrightarrow> int'32_in_bounds (sint o13 - sint o12) \<and> (\<forall>(o14 :: 32 word). sint o14 = sint o13 - sint o12 \<longrightarrow> int'32_in_bounds (sint o14 + (10 :: int)) \<and> (\<forall>(d :: 32 word). sint d = sint o14 + (10 :: int) \<longrightarrow> (\<forall>(o15 :: 32 word). sint o15 = of_char (''A'' ! (0 :: nat)) \<longrightarrow> (\<forall>(o16 :: 32 word). sint o16 = of_char c \<longrightarrow> int'32_in_bounds (sint o16 - sint o15) \<and> (\<forall>(o17 :: 32 word). sint o17 = sint o16 - sint o15 \<longrightarrow> int'32_in_bounds (sint o17 + (10 :: int)) \<and> (\<forall>(o18 :: 32 word). sint o18 = sint o17 + (10 :: int) \<longrightarrow> ((0 :: int) \<le> sint o18 \<and> sint o18 \<le> (255 :: int)) \<and> (\<forall>(o19 :: 8 word). uint o19 = sint o18 \<longrightarrow> ((0 :: int) \<le> uint o19 \<and> uint o19 < sint base \<longrightarrow> uint o19 = text_to_num (sint base) c) \<and> (sint base \<le> uint o19 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o19)))))))) else ((0 :: int) \<le> sint base \<and> sint base \<le> (255 :: int)) \<and> (\<forall>(o12 :: 8 word). uint o12 = sint base \<longrightarrow> ((0 :: int) \<le> uint o12 \<and> uint o12 < sint base \<longrightarrow> uint o12 = text_to_num (sint base) c) \<and> (sint base \<le> uint o12 \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint o12))))))))))) \<and> (\<forall>(digit :: 8 word). ((0 :: int) \<le> uint digit \<and> uint digit < sint base \<longrightarrow> uint digit = text_to_num (sint base) c) \<and> (sint base \<le> uint digit \<longrightarrow> \<not>stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)) \<and> (0 :: int) \<le> uint digit \<longrightarrow> ((0 :: int) \<le> sint base \<and> sint base \<le> (255 :: int)) \<and> (\<forall>(o3 :: 8 word). uint o3 = sint base \<longrightarrow> (if uint o3 \<le> uint digit then (-(1 :: int) \<le> readers mpz r \<and> readers mpz r \<le> (0 :: int)) \<and> (\<forall>(mpz1 :: mpz_memo). mpz_Z.alloc mpz1 = mpz_Z.alloc mpz \<and> sgn mpz1 = sgn mpz \<and> readers mpz1 = readers mpz \<and> zones mpz1 = zones mpz \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> abs_size mpz1 r = (0 :: int) \<and> abs_value_of mpz1 r = (0 :: int) \<longrightarrow> (\<forall>(x :: mpz_ptr). \<not>x = r \<longrightarrow> mpz_unchanged x mpz1 mpz) \<and> readers mpz1 r = (0 :: int) \<and> (-(1 :: int) = (0 :: int) \<longrightarrow> value_of r mpz1 = value_text (sint base) (pelts sp) (offset sp)) \<and> (-(1 :: int) \<le> -(1 :: int) \<and> -(1 :: int) \<le> (0 :: int)) \<and> (-(1 :: int) = (0 :: int) \<longleftrightarrow> stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp))) else ((c_C.min dp1 \<le> offset dp1 + sint dn \<and> offset dp1 + sint dn < c_C.max dp1) \<and> writable dp1 = True) \<and> (\<forall>(dp2 :: 8 word ptr). length (data dp2) = length (data dp1) \<and> offset dp2 = offset dp1 \<and> c_C.min dp2 = c_C.min dp1 \<and> c_C.max dp2 = c_C.max dp1 \<and> writable dp2 = writable dp1 \<and> zone1 dp2 = zone1 dp1 \<longrightarrow> pelts dp2 = (pelts dp1)(offset dp2 + sint dn := digit) \<and> pelts dp2 (offset dp2 + sint dn) = digit \<longrightarrow> int'32_in_bounds (sint dn + (1 :: int)) \<and> (\<forall>(o4 :: 32 word). sint o4 = sint dn + (1 :: int) \<longrightarrow> (c_C.min spi \<le> offset spi + (1 :: int) \<and> offset spi + (1 :: int) \<le> c_C.max spi) \<and> (\<forall>(o5 :: char ptr). offset o5 = offset spi + (1 :: int) \<and> plength o5 = plength spi \<and> pelts o5 = pelts spi \<and> data o5 = data spi \<and> c_C.min o5 = c_C.min spi \<and> c_C.max o5 = c_C.max spi \<and> zone1 o5 = zone1 spi \<and> writable o5 = writable spi \<longrightarrow> ((0 :: int) \<le> offset sp + strlen (pelts sp) (offset sp) - offset spi \<and> offset sp + strlen (pelts sp) (offset sp) - offset o5 < offset sp + strlen (pelts sp) (offset sp) - offset spi) \<and> offset o5 = offset sp + sint sign + sint o4 \<and> (offset sp + sint sign \<le> offset o5 \<and> offset o5 \<le> offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min sp \<le> offset o5 \<and> offset o5 \<le> c_C.max sp) \<and> abs_value_sub_text (sint base) (pelts sp) (offset sp + sint sign) (offset o5) = svalue_sub (sint base) (pelts dp2) (0 :: int) (sint o4) \<and> in_base (sint base) (pelts dp2) (0 :: int) (sint o4) \<and> (\<not>of_char (pelts o5 (offset o5)) = (0 :: int) \<longleftrightarrow> offset o5 < offset sp + strlen (pelts sp) (offset sp)) \<and> (c_C.min o5 = c_C.min sp \<and> c_C.max o5 = c_C.max sp) \<and> plength o5 = plength sp \<and> pelts o5 = pelts sp \<and> text_in_base (sint base) (pelts sp) (offset sp + sint sign) (offset o5)))))))) else \<forall>(o3 :: bool). (sint dn = sint (0 :: 32 word) \<longrightarrow> o3 = True) \<and> (o3 = True \<longrightarrow> dn = (0 :: 32 word)) \<longrightarrow> (if o3 = True then (-(1 :: int) \<le> readers mpz r \<and> readers mpz r \<le> (0 :: int)) \<and> (\<forall>(mpz1 :: mpz_memo). mpz_Z.alloc mpz1 = mpz_Z.alloc mpz \<and> sgn mpz1 = sgn mpz \<and> readers mpz1 = readers mpz \<and> zones mpz1 = zones mpz \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> abs_size mpz1 r = (0 :: int) \<and> abs_value_of mpz1 r = (0 :: int) \<longrightarrow> (\<forall>(x :: mpz_ptr). \<not>x = r \<longrightarrow> mpz_unchanged x mpz1 mpz) \<and> readers mpz1 r = (0 :: int) \<and> (-(1 :: int) = (0 :: int) \<longrightarrow> value_of r mpz1 = value_text (sint base) (pelts sp) (offset sp)) \<and> (-(1 :: int) \<le> -(1 :: int) \<and> -(1 :: int) \<le> (0 :: int)) \<and> (-(1 :: int) = (0 :: int) \<longleftrightarrow> stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp))) else (0 :: int) \<le> sint base \<and> (\<forall>(o4 :: 64 word). uint o4 = sint base \<longrightarrow> ((2 :: int) \<le> uint o4 \<and> uint o4 \<le> (256 :: int)) \<and> (\<forall>(bits :: 32 word). ((0 :: int) \<le> uint bits \<and> uint bits \<le> (8 :: int)) \<and> (\<not>uint bits = (0 :: int) \<longrightarrow> (2 :: int) ^\<^sub>i uint bits = uint o4) \<and> (uint bits = (0 :: int) \<longrightarrow> (\<forall>(n :: int). (0 :: int) \<le> n \<longrightarrow> \<not>(2 :: int) ^\<^sub>i n = uint o4)) \<longrightarrow> (if (0 :: int) < uint bits then uint bits \<le> (2147483647 :: int) \<and> (\<forall>(o5 :: 32 word). sint o5 = uint bits \<longrightarrow> int'32_in_bounds (sint dn * sint o5) \<and> (\<forall>(o6 :: 32 word). sint o6 = sint dn * sint o5 \<longrightarrow> int'32_in_bounds (sint o6 + (63 :: int)) \<and> (\<forall>(o7 :: 32 word). sint o7 = sint o6 + (63 :: int) \<longrightarrow> (\<not>(64 :: int) = (0 :: int) \<and> int'32_in_bounds (sint o7 cdiv (64 :: int))) \<and> (\<forall>(alloc :: 32 word). sint alloc = sint o7 cdiv (64 :: int) \<longrightarrow> (readers mpz r = (0 :: int) \<and> (1 :: int) \<le> mpz_Z.alloc mpz r) \<and> (\<forall>(mpz1 :: mpz_memo). sgn mpz1 = sgn mpz \<longrightarrow> (\<forall>(rp :: 64 word ptr). (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> readers mpz1 r = -(1 :: int) \<and> abs_value_of mpz1 r = value rp (abs_size mpz1 r) \<and> zones mpz1 r = zone1 rp \<and> offset rp = (0 :: int) \<and> plength rp = mpz_Z.alloc mpz1 r \<and> c_C.min rp = (0 :: int) \<and> c_C.max rp = plength rp \<and> writable rp = True \<and> abs_size mpz1 r = abs_size mpz r \<and> value rp (abs_size mpz r) = abs_value_of mpz r \<and> (if mpz_Z.alloc mpz r < sint alloc then mpz_Z.alloc mpz1 r = sint alloc else mpz_Z.alloc mpz1 r = mpz_Z.alloc mpz r) \<longrightarrow> (0 :: int) \<le> sint dn \<and> (\<forall>(o8 :: 32 word). uint o8 = sint dn \<longrightarrow> (((0 :: int) < uint o8 \<and> uint o8 \<le> (2147483647 :: int)) \<and> (0 :: int) < sint alloc \<and> valid rp (sint alloc) \<and> valid dp1 (uint o8) \<and> ((1 :: int) \<le> uint bits \<and> uint bits \<le> (8 :: int)) \<and> (2 :: int) ^\<^sub>i (uint bits * uint o8) \<le> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint alloc \<and> writable rp = True \<and> in_base ((2 :: int) ^\<^sub>i uint bits) (pelts dp1) (offset dp1) (offset dp1 + uint o8)) \<and> (\<forall>(rp1 :: 64 word ptr). length (data rp1) = length (data rp) \<and> offset rp1 = offset rp \<and> c_C.min rp1 = c_C.min rp \<and> c_C.max rp1 = c_C.max rp \<and> writable rp1 = writable rp \<and> zone1 rp1 = zone1 rp \<longrightarrow> (\<forall>(rn :: 32 word). ((0 :: int) \<le> sint rn \<and> sint rn \<le> sint alloc) \<and> value rp1 (sint rn) = svalue ((2 :: int) ^\<^sub>i uint bits) dp1 (uint o8) \<and> ((0 :: int) < sint rn \<longrightarrow> (0 :: int) < uint (pelts rp1 (offset rp1 + sint rn - (1 :: int)))) \<longrightarrow> (\<forall>(o9 :: bool). (sint sign = sint (0 :: 32 word) \<longrightarrow> o9 = True) \<and> (o9 = True \<longrightarrow> sign = (0 :: 32 word)) \<longrightarrow> (\<not>o9 = True \<longrightarrow> int'32_in_bounds (-sint rn)) \<and> (\<forall>(rn1 :: 32 word). (if \<not>o9 = True then sint rn1 = -sint rn else rn1 = rn) \<longrightarrow> (zones mpz1 r = zone1 rp1 \<and> readers mpz1 r = -(1 :: int) \<and> offset rp1 = (0 :: int) \<and> c_C.min rp1 = (0 :: int) \<and> c_C.max rp1 = plength rp1 \<and> abs (sint rn1) \<le> plength rp1 \<and> plength rp1 = mpz_Z.alloc mpz1 r \<and> (\<not>sint rn1 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint rn1) - (1 :: int)) \<le> value rp1 (abs (sint rn1)))) \<and> (\<forall>(mpz2 :: mpz_memo). mpz_Z.alloc mpz2 = mpz_Z.alloc mpz1 \<and> readers mpz2 = readers mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz2 mpz1) \<and> (sgn mpz2 r = (1 :: int) \<longleftrightarrow> (0 :: int) \<le> sint rn1) \<and> (sgn mpz2 r = -(1 :: int) \<longleftrightarrow> sint rn1 < (0 :: int)) \<and> abs_size mpz2 r = abs (sint rn1) \<and> abs_value_of mpz2 r = value rp1 (abs (sint rn1)) \<longrightarrow> (zones mpz2 r = zone1 rp1 \<and> readers mpz2 r = -(1 :: int) \<and> c_C.min rp1 = (0 :: int) \<and> c_C.max rp1 = plength rp1 \<and> abs_value_of mpz2 r = value rp1 (abs_size mpz2 r)) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> mpz_Z.alloc mpz3 = mpz_Z.alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 r = (0 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> (\<forall>(x :: mpz_ptr). \<not>x = r \<longrightarrow> mpz_unchanged x mpz3 mpz) \<and> readers mpz3 r = (0 :: int) \<and> value_of r mpz3 = value_text (sint base) (pelts sp) (offset sp) \<and> (-(1 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> (0 :: int)) \<and> stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)))))))))))))) else (0 :: int) \<le> sint base \<and> (\<forall>(o5 :: 64 word). uint o5 = sint base \<longrightarrow> ((2 :: int) \<le> uint o5 \<and> uint o5 \<le> (256 :: int)) \<and> (\<forall>(info :: wmpn_base_info). b info = uint o5 \<longrightarrow> (let o6 :: 32 word = base_info_BaseInfo.exp info in uint o6 \<le> (2147483647 :: int) \<and> (\<forall>(o7 :: 32 word). sint o7 = uint o6 \<longrightarrow> (let o8 :: 32 word = base_info_BaseInfo.exp info in uint o8 \<le> (2147483647 :: int) \<and> (\<forall>(o9 :: 32 word). sint o9 = uint o8 \<longrightarrow> int'32_in_bounds (sint dn + sint o9) \<and> (\<forall>(o10 :: 32 word). sint o10 = sint dn + sint o9 \<longrightarrow> int'32_in_bounds (sint o10 - (1 :: int)) \<and> (\<forall>(o11 :: 32 word). sint o11 = sint o10 - (1 :: int) \<longrightarrow> (\<not>sint o7 = (0 :: int) \<and> int'32_in_bounds (sint o11 cdiv sint o7)) \<and> (\<forall>(alloc :: 32 word). sint alloc = sint o11 cdiv sint o7 \<longrightarrow> (readers mpz r = (0 :: int) \<and> (1 :: int) \<le> mpz_Z.alloc mpz r) \<and> (\<forall>(mpz1 :: mpz_memo). sgn mpz1 = sgn mpz \<longrightarrow> (\<forall>(rp :: 64 word ptr). (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz1 mpz) \<and> readers mpz1 r = -(1 :: int) \<and> abs_value_of mpz1 r = value rp (abs_size mpz1 r) \<and> zones mpz1 r = zone1 rp \<and> offset rp = (0 :: int) \<and> plength rp = mpz_Z.alloc mpz1 r \<and> c_C.min rp = (0 :: int) \<and> c_C.max rp = plength rp \<and> writable rp = True \<and> abs_size mpz1 r = abs_size mpz r \<and> value rp (abs_size mpz r) = abs_value_of mpz r \<and> (if mpz_Z.alloc mpz r < sint alloc then mpz_Z.alloc mpz1 r = sint alloc else mpz_Z.alloc mpz1 r = mpz_Z.alloc mpz r) \<longrightarrow> (0 :: int) \<le> sint base \<and> (\<forall>(o12 :: 64 word). uint o12 = sint base \<longrightarrow> (0 :: int) \<le> sint dn \<and> (\<forall>(o13 :: 32 word). uint o13 = sint dn \<longrightarrow> (((0 :: int) < uint o13 \<and> uint o13 \<le> (2147483647 :: int)) \<and> (0 :: int) < sint alloc \<and> valid rp (sint alloc) \<and> valid dp1 (uint o13) \<and> ((2 :: int) \<le> uint o12 \<and> uint o12 \<le> (256 :: int)) \<and> uint o12 ^\<^sub>i uint o13 \<le> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i sint alloc \<and> writable rp = True \<and> in_base (uint o12) (pelts dp1) (offset dp1) (offset dp1 + uint o13) \<and> b info = uint o12) \<and> (\<forall>(rp1 :: 64 word ptr). length (data rp1) = length (data rp) \<and> offset rp1 = offset rp \<and> c_C.min rp1 = c_C.min rp \<and> c_C.max rp1 = c_C.max rp \<and> writable rp1 = writable rp \<and> zone1 rp1 = zone1 rp \<longrightarrow> (\<forall>(rn :: 32 word). ((0 :: int) < svalue (uint o12) dp1 (uint o13) \<longrightarrow> (1 :: int) \<le> sint rn \<and> sint rn \<le> sint alloc) \<and> value rp1 (sint rn) = svalue (uint o12) dp1 (uint o13) \<and> ((0 :: int) < svalue (uint o12) dp1 (uint o13) \<longrightarrow> (0 :: int) < uint (pelts rp1 (offset rp1 + sint rn - (1 :: int)))) \<and> (svalue (uint o12) dp1 (uint o13) = (0 :: int) \<longrightarrow> sint rn = (1 :: int)) \<and> (0 :: int) < sint rn \<longrightarrow> int'32_in_bounds (sint rn - (1 :: int)) \<and> (\<forall>(o14 :: 32 word). sint o14 = sint rn - (1 :: int) \<longrightarrow> (c_C.min rp1 \<le> offset rp1 + sint o14 \<and> offset rp1 + sint o14 < c_C.max rp1) \<and> (let o15 :: 64 word = pelts rp1 (offset rp1 + sint o14) in \<forall>(o16 :: bool). (uint o15 = uint (0 :: 64 word) \<longrightarrow> o16 = True) \<and> (o16 = True \<longrightarrow> o15 = (0 :: 64 word)) \<longrightarrow> (\<forall>(o17 :: 32 word). (if o16 = True then o17 = (1 :: 32 word) else o17 = (0 :: 32 word)) \<longrightarrow> int'32_in_bounds (sint rn - sint o17) \<and> (\<forall>(rn1 :: 32 word). sint rn1 = sint rn - sint o17 \<longrightarrow> (\<forall>(o18 :: bool). (sint sign = sint (0 :: 32 word) \<longrightarrow> o18 = True) \<and> (o18 = True \<longrightarrow> sign = (0 :: 32 word)) \<longrightarrow> (\<not>o18 = True \<longrightarrow> int'32_in_bounds (-sint rn1)) \<and> (\<forall>(rn2 :: 32 word). (if \<not>o18 = True then sint rn2 = -sint rn1 else rn2 = rn1) \<longrightarrow> (zones mpz1 r = zone1 rp1 \<and> readers mpz1 r = -(1 :: int) \<and> offset rp1 = (0 :: int) \<and> c_C.min rp1 = (0 :: int) \<and> c_C.max rp1 = plength rp1 \<and> abs (sint rn2) \<le> plength rp1 \<and> plength rp1 = mpz_Z.alloc mpz1 r \<and> (\<not>sint rn2 = (0 :: int) \<longrightarrow> ((18446744073709551615 :: int) + (1 :: int)) ^\<^sub>i (abs (sint rn2) - (1 :: int)) \<le> value rp1 (abs (sint rn2)))) \<and> (\<forall>(mpz2 :: mpz_memo). mpz_Z.alloc mpz2 = mpz_Z.alloc mpz1 \<and> readers mpz2 = readers mpz1 \<and> zones mpz2 = zones mpz1 \<longrightarrow> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> mpz_unchanged y mpz2 mpz1) \<and> (sgn mpz2 r = (1 :: int) \<longleftrightarrow> (0 :: int) \<le> sint rn2) \<and> (sgn mpz2 r = -(1 :: int) \<longleftrightarrow> sint rn2 < (0 :: int)) \<and> abs_size mpz2 r = abs (sint rn2) \<and> abs_value_of mpz2 r = value rp1 (abs (sint rn2)) \<longrightarrow> (zones mpz2 r = zone1 rp1 \<and> readers mpz2 r = -(1 :: int) \<and> c_C.min rp1 = (0 :: int) \<and> c_C.max rp1 = plength rp1 \<and> abs_value_of mpz2 r = value rp1 (abs_size mpz2 r)) \<and> (\<forall>(mpz3 :: mpz_memo). abs_value_of mpz3 = abs_value_of mpz2 \<and> mpz_Z.alloc mpz3 = mpz_Z.alloc mpz2 \<and> abs_size mpz3 = abs_size mpz2 \<and> sgn mpz3 = sgn mpz2 \<and> zones mpz3 = zones mpz2 \<longrightarrow> readers mpz3 r = (0 :: int) \<and> (\<forall>(y :: mpz_ptr). \<not>y = r \<longrightarrow> readers mpz3 y = readers mpz2 y) \<longrightarrow> (\<forall>(x :: mpz_ptr). \<not>x = r \<longrightarrow> mpz_unchanged x mpz3 mpz) \<and> readers mpz3 r = (0 :: int) \<and> value_of r mpz3 = value_text (sint base) (pelts sp) (offset sp) \<and> (-(1 :: int) \<le> (0 :: int) \<and> (0 :: int) \<le> (0 :: int)) \<and> stringlemmas_String_value.string_in_base (sint base) (pelts sp) (offset sp)))))))))))))))))))))))))))))))))))"
  sorry
end
